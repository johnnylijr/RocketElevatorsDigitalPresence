(window.webpackJsonpCMSBrowserComponents=window.webpackJsonpCMSBrowserComponents||[]).push([[17],{252:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r.n(a),o=r(11);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var i="noopener noreferrer",d={props:{target:{type:String,default:".document-container > .page"},displayFrequency:{type:Number,default:2},defaults:{type:Object,default:function(){return{backgroundColor:"transparent"}}},selectAllTargets:{type:Boolean,default:!1}},data:function(){return{observed:0,observer:null,payload:{}}},created:function(){window.addEventListener("message",this.listener)},beforeDestroy:function(){window.removeEventListener("message",this.listener),this.observer&&this.observer.disconnect()},methods:{displayBackground:function(){var e=this.payload,t=e.adClickUrl,r=e.backgroundColor,a=e.backgroundImagePath,n='url("'.concat(a,'")'),s=Object(o.a)("<a>",{href:t,target:"_blank",rel:i}).addClass("reveal-ad-background").css({backgroundImage:n});Object(o.a)("body").css({backgroundColor:r}).prepend(s),Object(o.a)("body").addClass("with-reveal-ad")},displayAd:function(e){if(e){var t=this.payload,r=t.adClickUrl,a=t.adImagePath,n=t.adTitle,s=t.boxShadow,d=Object(o.a)("<div>").addClass("reveal-ad");s&&d.addClass("reveal-ad--".concat(s,"-shadow")),d.html(Object(o.a)("<a>",{href:r,title:n,target:"_blank",rel:i}).append(Object(o.a)("<img>",{src:a,alt:n}))),Object(o.a)(e).before(d)}},shouldDisplay:function(){var e=this.displayFrequency;return this.observed+=1,this.observed%e>0},observeMutations:function(){var e=this;if(window.MutationObserver){this.observer=new MutationObserver((function(t){for(var r=0;r<t.length;r+=1){var a=t[r];if("childList"===a.type)for(var n=0;n<a.addedNodes.length;n+=1){var o=a.addedNodes[n];o.matches&&o.matches(e.target)&&e.shouldDisplay()&&e.displayAd(o)}}}));var t=document.querySelector(this.target);t&&t.parentNode&&this.observer.observe(t.parentNode,{childList:!0,subtree:!0})}},listener:function(e){var t=this,r=function(e){try{return JSON.parse(e)}catch(e){return{}}}(e.data);["adImagePath","adTitle","backgroundImagePath","adClickUrl"].every((function(e){return r[e]}))&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){return t.execute(r)})):this.execute(r))},execute:function(e){var t=this.selectAllTargets?document.querySelectorAll(this.target):[document.querySelector(this.target)];this.payload=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(r,!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.defaults,{},e),this.displayBackground();for(var r=0;r<t.length;r+=1)this.displayAd(t[r]);this.observeMutations(),window.removeEventListener("message",this.listener)}}},c=r(1),l=Object(c.a)(d,(function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"marko-web-reveal-ad-listener"}})}),[],!1,null,null,null);t.default=l.exports}}]);
//# sourceMappingURL=reveal-ad-listener.f7780052.js.map