!function(){"use strict";function e(){var t=this;this.middlewares=[],this.events={},this.on("run.setting",function(e){t.run(e)})}e.prototype.on=function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},e.prototype.emit=function(e,t){var n=this.events[e];if(!n||0===n.length)return!1;for(var r,i=0;r=n[i++];)r.call(this,t)},e.prototype.use=function(e){return this.middlewares.push(e),this},e.prototype.init=function(){window.$$__ptx_engage_$=this},e.prototype.run=function(e){if(!e)return!1;var t=this,n={window:window,setting:e,engager:t},r=0;!function i(){var e=t.middlewares[r++];e&&e(n,i)}()};var o=function(e){return"object"==typeof e?null!==e:"function"==typeof e},S=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e},u=Object.is||function L(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},t={}.toString,i=function(e){return t.call(e).slice(8,-1)};function n(e,t){return e(t={exports:{}},t.exports),t.exports}var r,a,p=n(function(e){var t=e.exports={version:"2.6.1"};"number"==typeof __e&&(__e=t)}),v=(p.version,n(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),c=n(function(e){var t="__core-js_shared__",n=v[t]||(v[t]={});(e.exports=function(e,t){return n[e]||(n[e]=t!==undefined?t:{})})("versions",[]).push({version:p.version,mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})}),s=0,l=Math.random(),d=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++s+l).toString(36))},f=n(function(e){var t=c("wks"),n=v.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:d)("Symbol."+e))}).store=t}),g=f("toStringTag"),h="Arguments"==i(function(){return arguments}()),m=function(e){var t,n,r;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),g))?n:h?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r},y=RegExp.prototype.exec,T=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==m(e))throw new TypeError("RegExp#exec called on incompatible receiver");return y.call(e,t)},w=function(){var e=S(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},b=RegExp.prototype.exec,E=String.prototype.replace,k=b,_="lastIndex",I=(r=/a/,a=/b*/g,b.call(r,"a"),b.call(a,"a"),0!==r[_]||0!==a[_]),x=/()??/.exec("")[1]!==undefined;(I||x)&&(k=function(e){var t,n,r,i,o=this;return x&&(n=new RegExp("^"+o.source+"$(?!\\s)",w.call(o))),I&&(t=o[_]),r=b.call(o,e),I&&r&&(o[_]=o.global?r.index+r[0].length:t),x&&r&&1<r.length&&E.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)arguments[i]===undefined&&(r[i]=undefined)}),r});var O=k,A=function(e){try{return!!e()}catch(t){return!0}},C=!A(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),N=v.document,L=o(N)&&o(N.createElement),D=function(e){return L?N.createElement(e):{}},R=!C&&!A(function(){return 7!=Object.defineProperty(D("div"),"a",{get:function(){return 7}}).a}),M=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},P=Object.defineProperty,W={f:C?Object.defineProperty:function(e,t,n){if(S(e),t=M(t,!0),S(n),R)try{return P(e,t,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},j=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},U=C?function(e,t,n){return W.f(e,t,j(1,n))}:function(e,t,n){return e[t]=n,e},V={}.hasOwnProperty,G=function(e,t){return V.call(e,t)},F=n(function(e){var o=d("src"),t="toString",n=Function[t],a=(""+n).split(t);p.inspectSource=function(e){return n.call(e)},(e.exports=function(e,t,n,r){var i="function"==typeof n;i&&(G(n,"name")||U(n,"name",t)),e[t]!==n&&(i&&(G(n,o)||U(n,o,e[t]?""+e[t]:a.join(String(t)))),e===v?e[t]=n:r?e[t]?e[t]=n:U(e,t,n):(delete e[t],U(e,t,n)))})(Function.prototype,t,function(){return"function"==typeof this&&this[o]||n.call(this)})}),$=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},B=function(r,i,e){if($(r),i===undefined)return r;switch(e){case 1:return function(e){return r.call(i,e)};case 2:return function(e,t){return r.call(i,e,t)};case 3:return function(e,t,n){return r.call(i,e,t,n)}}return function(){return r.apply(i,arguments)}},H="prototype",q=function(e,t,n){var r,i,o,a,c=e&q.F,u=e&q.G,s=e&q.S,l=e&q.P,d=e&q.B,f=u?v:s?v[t]||(v[t]={}):(v[t]||{})[H],g=u?p:p[t]||(p[t]={}),h=g[H]||(g[H]={});for(r in u&&(n=t),n)o=((i=!c&&f&&f[r]!==undefined)?f:n)[r],a=d&&i?B(o,v):l&&"function"==typeof o?B(Function.call,o):o,f&&F(f,r,o,e&q.U),g[r]!=o&&U(g,r,a),l&&h[r]!=o&&(h[r]=o)};v.core=p,q.F=1,q.G=2,q.S=4,q.P=8,q.B=16,q.W=32,q.U=64,q.R=128;var z=q;z({target:"RegExp",proto:!0,forced:O!==/./.exec},{exec:O});var J=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e},X=f("species"),K=!A(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),Y=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),Z=function(n,e,t){var r=f(n),o=!A(function(){var e={};return e[r]=function(){return 7},7!=""[n](e)}),i=o?!A(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===n&&(t.constructor={},t.constructor[X]=function(){return t}),t[r](""),!e}):undefined;if(!o||!i||"replace"===n&&!K||"split"===n&&!Y){var a=/./[r],c=t(J,r,""[n],function(e,t,n,r,i){return t.exec===O?o&&!i?{done:!0,value:a.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),u=c[0],s=c[1];F(String.prototype,n,u),U(RegExp.prototype,r,2==e?function(e,t){return s.call(e,this,t)}:function(e){return s.call(e,this)})}};Z("search",1,function(r,i,a,c){return[function(e){var t=r(this),n=e==undefined?undefined:e[i];return n!==undefined?n.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=c(a,e,this);if(t.done)return t.value;var n=S(e),r=String(this),i=n.lastIndex;u(i,0)||(n.lastIndex=0);var o=T(n,r);return u(n.lastIndex,i)||(n.lastIndex=i),null===o?-1:o.index}]});var Q,ee=Math.ceil,te=Math.floor,ne=function(e){return isNaN(e=+e)?0:(0<e?te:ee)(e)},re=Math.min,ie=function(e){return 0<e?re(ne(e),9007199254740991):0},oe=(Q=!0,function(e,t){var n,r,i=String(J(e)),o=ne(t),a=i.length;return o<0||a<=o?Q?"":undefined:(n=i.charCodeAt(o))<55296||56319<n||o+1===a||(r=i.charCodeAt(o+1))<56320||57343<r?Q?i.charAt(o):n:Q?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}),ae=function(e,t,n){return t+(n?oe(e,t).length:1)};Z("match",1,function(r,i,s,l){return[function(e){var t=r(this),n=e==undefined?undefined:e[i];return n!==undefined?n.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=l(s,e,this);if(t.done)return t.value;var n=S(e),r=String(this);if(!n.global)return T(n,r);for(var i,o=n.unicode,a=[],c=n.lastIndex=0;null!==(i=T(n,r));){var u=String(i[0]);""===(a[c]=u)&&(n.lastIndex=ae(r,ie(n.lastIndex),o)),c++}return 0===c?null:a}]});var ce=f("match"),ue=function(e){var t;return o(e)&&((t=e[ce])!==undefined?!!t:"RegExp"==i(e))},se=f("species"),le=Math.min,de=[].push,fe="split",ge="length",he="lastIndex",pe=!!function(){try{return new RegExp("x","y")}catch(e){}}();Z("split",2,function(i,o,w,b){var E;return E="c"=="abbc"[fe](/(b)*/)[1]||4!="test"[fe](/(?:)/,-1)[ge]||2!="ab"[fe](/(?:ab)*/)[ge]||4!="."[fe](/(.?)(.?)/)[ge]||1<"."[fe](/()()/)[ge]||""[fe](/.?/)[ge]?function(e,t){var n=String(this);if(e===undefined&&0===t)return[];if(!ue(e))return w.call(n,e,t);for(var r,i,o,a=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,s=t===undefined?4294967295:t>>>0,l=new RegExp(e.source,c+"g");(r=O.call(l,n))&&!(u<(i=l[he])&&(a.push(n.slice(u,r.index)),1<r[ge]&&r.index<n[ge]&&de.apply(a,r.slice(1)),o=r[0][ge],u=i,a[ge]>=s));)l[he]===r.index&&l[he]++;return u===n[ge]?!o&&l.test("")||a.push(""):a.push(n.slice(u)),a[ge]>s?a.slice(0,s):a}:"0"[fe](undefined,0)[ge]?function(e,t){return e===undefined&&0===t?[]:w.call(this,e,t)}:w,[function(e,t){var n=i(this),r=e==undefined?undefined:e[o];return r!==undefined?r.call(e,n,t):E.call(String(n),e,t)},function(e,t){var n=b(E,e,this,t,E!==w);if(n.done)return n.value;var r,i,o,a=S(e),c=String(this),u=(r=RegExp,(o=S(a).constructor)===undefined||(i=S(o)[se])==undefined?r:$(i)),s=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(pe?"y":"g"),d=new u(pe?a:"^(?:"+a.source+")",l),f=t===undefined?4294967295:t>>>0;if(0===f)return[];if(0===c.length)return null===T(d,c)?[c]:[];for(var g=0,h=0,p=[];h<c.length;){d.lastIndex=pe?h:0;var v,m=T(d,pe?c:c.slice(h));if(null===m||(v=le(ie(d.lastIndex+(pe?0:h)),c.length))===g)h=ae(c,h,s);else{if(p.push(c.slice(g,h)),p.length===f)return p;for(var y=1;y<=m.length-1;y++)if(p.push(m[y]),p.length===f)return p;h=g=v}}return p.push(c.slice(g)),p}]});var ve,me={f:{}.propertyIsEnumerable},ye=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)},we=function(e){return ye(J(e))},be=Object.getOwnPropertyDescriptor,Ee={f:C?be:function(e,t){if(e=we(e),t=M(t,!0),R)try{return be(e,t)}catch(n){}if(G(e,t))return j(!me.f.call(e,t),e[t])}},ke=function(e,t){if(S(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")},_e={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,r){try{(r=B(Function.call,Ee.f(Object.prototype,"__proto__").set,2))(e,[]),n=!(e instanceof Array)}catch(t){n=!0}return function(e,t){return ke(e,t),n?e.__proto__=t:r(e,t),e}}({},!1):undefined),check:ke}.set,Se=function(e,t,n){var r,i=t.constructor;return i!==n&&"function"==typeof i&&(r=i.prototype)!==n.prototype&&o(r)&&_e&&_e(e,r),e},Te=Math.max,Ie=Math.min,xe=c("keys"),Oe=function(e){return xe[e]||(xe[e]=d(e))},Ae=(ve=!1,function(e,t,n){var r,i,o,a=we(e),c=ie(a.length),u=(i=c,(r=ne(r=n))<0?Te(r+i,0):Ie(r,i));if(ve&&t!=t){for(;u<c;)if((o=a[u++])!=o)return!0}else for(;u<c;u++)if((ve||u in a)&&a[u]===t)return ve||u||0;return!ve&&-1}),Ce=Oe("IE_PROTO"),Ne=function(e,t){var n,r=we(e),i=0,o=[];for(n in r)n!=Ce&&G(r,n)&&o.push(n);for(;t.length>i;)G(r,n=t[i++])&&(~Ae(o,n)||o.push(n));return o},Le="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),De=Le.concat("length","prototype"),Re={f:Object.getOwnPropertyNames||function(e){return Ne(e,De)}},Me="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",Pe="["+Me+"]",We=RegExp("^"+Pe+Pe+"*"),je=RegExp(Pe+Pe+"*$"),Ue=function(e,t,n){var r={},i=A(function(){return!!Me[e]()||"​"!="​"[e]()}),o=r[e]=i?t(Ve):Me[e];n&&(r[n]=o),z(z.P+z.F*i,"String",r)},Ve=Ue.trim=function(e,t){return e=String(J(e)),1&t&&(e=e.replace(We,"")),2&t&&(e=e.replace(je,"")),e},Ge=Ue,Fe=Object.keys||function st(e){return Ne(e,Le)},$e=C?Object.defineProperties:function(e,t){S(e);for(var n,r=Fe(t),i=r.length,o=0;o<i;)W.f(e,n=r[o++],t[n]);return e},Be=v.document,He=Be&&Be.documentElement,qe=Oe("IE_PROTO"),ze=function(){},Je="prototype",Xe=function(){var e,t=D("iframe"),n=Le.length;for(t.style.display="none",He.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Xe=e.F;n--;)delete Xe[Je][Le[n]];return Xe()},Ke=Object.create||function(e,t){var n;return null!==e?(ze[Je]=S(e),n=new ze,ze[Je]=null,n[qe]=e):n=Xe(),t===undefined?n:$e(n,t)},Ye=Re.f,Ze=Ee.f,Qe=W.f,et=Ge.trim,tt="Number",nt=v[tt],rt=nt,it=nt.prototype,ot=i(Ke(it))==tt,at="trim"in String.prototype,ct=function(e){var t=M(e,!1);if("string"==typeof t&&2<t.length){var n,r,i,o=(t=at?t.trim():et(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,c=t.slice(2),u=0,s=c.length;u<s;u++)if((a=c.charCodeAt(u))<48||i<a)return NaN;return parseInt(c,r)}}return+t};if(!nt(" 0o1")||!nt("0b1")||nt("+0x1")){nt=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof nt&&(ot?A(function(){it.valueOf.call(n)}):i(n)!=tt)?Se(new rt(ct(t)),n,nt):ct(t)};for(var ut,st=C?Ye(rt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),lt=0;st.length>lt;lt++)G(rt,ut=st[lt])&&!G(nt,ut)&&Qe(nt,ut,Ze(rt,ut));(nt.prototype=it).constructor=nt,F(v,tt,nt)}var dt=function(e){return Object(J(e))},ft=Array.isArray||function(e){return"Array"==i(e)},gt=f("species"),ht=function(e,t){return ft(n=e)&&("function"!=typeof(r=n.constructor)||r!==Array&&!ft(r.prototype)||(r=undefined),o(r)&&null===(r=r[gt])&&(r=undefined)),new(r===undefined?Array:r)(t);var n,r},pt=f("unscopables"),vt=Array.prototype;vt[pt]==undefined&&U(vt,pt,{});var mt,yt,wt,bt,Et,kt,_t,St,Tt,It=function(e){vt[pt][e]=!0},xt=(wt=1==(mt=5),bt=2==mt,Et=3==mt,kt=4==mt,_t=6==mt,St=5==mt||_t,Tt=yt||ht,function(e,t,n){for(var r,i,o=dt(e),a=ye(o),c=B(t,n,3),u=ie(a.length),s=0,l=wt?Tt(e,u):bt?Tt(e,0):undefined;s<u;s++)if((St||s in a)&&(i=c(r=a[s],s,o),mt))if(wt)l[s]=i;else if(i)switch(mt){case 3:return!0;case 5:return r;case 6:return s;case 2:l.push(r)}else if(kt)return!1;return _t?-1:Et||kt?kt:l}),Ot="find",At=!0;Ot in[]&&Array(1)[Ot](function(){At=!1}),z(z.P+z.F*At,"Array",{find:function(e){return xt(this,e,1<arguments.length?arguments[1]:undefined)}}),It(Ot);var Ct=function(e,t){return{value:t,done:!!e}},Nt={},Lt=W.f,Dt=f("toStringTag"),Rt=function(e,t,n){e&&!G(e=n?e:e.prototype,Dt)&&Lt(e,Dt,{configurable:!0,value:t})},Mt={};U(Mt,f("iterator"),function(){return this});var Pt=Oe("IE_PROTO"),Wt=Object.prototype,jt=Object.getPrototypeOf||function(e){return e=dt(e),G(e,Pt)?e[Pt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Wt:null},Ut=f("iterator"),Vt=!([].keys&&"next"in[].keys()),Gt="values",Ft=function(){return this},$t=function(e,t,n,r,i,o,a){var c,u,s;u=t,s=r,(c=n).prototype=Ke(Mt,{next:j(1,s)}),Rt(c,u+" Iterator");var l,d,f,g=function(e){if(!Vt&&e in m)return m[e];switch(e){case"keys":case Gt:return function(){return new n(this,e)}}return function(){return new n(this,e)}},h=t+" Iterator",p=i==Gt,v=!1,m=e.prototype,y=m[Ut]||m["@@iterator"]||i&&m[i],w=y||g(i),b=i?p?g("entries"):w:undefined,E="Array"==t&&m.entries||y;if(E&&(f=jt(E.call(new e)))!==Object.prototype&&f.next&&(Rt(f,h,!0),"function"!=typeof f[Ut]&&U(f,Ut,Ft)),p&&y&&y.name!==Gt&&(v=!0,w=function(){return y.call(this)}),(Vt||v||!m[Ut])&&U(m,Ut,w),Nt[t]=w,Nt[h]=Ft,i)if(l={values:p?w:g(Gt),keys:o?w:g("keys"),entries:b},a)for(d in l)d in m||F(m,d,l[d]);else z(z.P+z.F*(Vt||v),t,l);return l}(Array,"Array",function(e,t){this._t=we(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=undefined,Ct(1)):Ct(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values");Nt.Arguments=Nt.Array,It("keys"),It("values"),It("entries");for(var Bt=f("iterator"),Ht=f("toStringTag"),qt=Nt.Array,zt={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},Jt=Fe(zt),Xt=0;Xt<Jt.length;Xt++){var Kt,Yt=Jt[Xt],Zt=zt[Yt],Qt=v[Yt],en=Qt&&Qt.prototype;if(en&&(en[Bt]||U(en,Bt,qt),en[Ht]||U(en,Ht,Yt),Nt[Yt]=qt,Zt))for(Kt in $t)en[Kt]||F(en,Kt,$t[Kt],!0)}var tn={};tn[f("toStringTag")]="z",tn+""!="[object z]"&&F(Object.prototype,"toString",function t(){return"[object "+m(this)+"]"},!0);var nn,rn,on,an;function cn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sn(e,t,n){return t&&un(e.prototype,t),n&&un(e,n),e}function ln(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function dn(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ln(Object(o),!0).forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):ln(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})}return i}function fn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vn(r){var i=function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=gn(r);if(i){var n=gn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return pn(this,e)}}function mn(e){throw new Error('"'+e+'" is read-only')}nn="keys",rn=function(){return function(e){return Fe(dt(e))}},on=(p.Object||{})[nn]||Object[nn],(an={})[nn]=rn(on),z(z.S+z.F*A(function(){on(1)}),"Object",an);var yn,wn=f("species"),bn=W.f,En=Re.f,kn=v.RegExp,_n=kn,Sn=kn.prototype,Tn=/a/g,In=/a/g,xn=new kn(Tn)!==Tn;if(C&&(!xn||A(function(){return In[f("match")]=!1,kn(Tn)!=Tn||kn(In)==In||"/a/i"!=kn(Tn,"i")}))){kn=function(e,t){var n=this instanceof kn,r=ue(e),i=t===undefined;return!n&&r&&e.constructor===kn&&i?e:Se(xn?new _n(r&&!i?e.source:e,t):_n((r=e instanceof kn)?e.source:e,r&&i?w.call(e):t),n?this:Sn,kn)};for(var On=function(t){t in kn||bn(kn,t,{configurable:!0,get:function(){return _n[t]},set:function(e){_n[t]=e}})},An=En(_n),Cn=0;An.length>Cn;)On(An[Cn++]);(Sn.constructor=kn).prototype=Sn,F(v,"RegExp",kn)}yn=v["RegExp"],C&&yn&&!yn[wn]&&W.f(yn,wn,{configurable:!0,get:function(){return this}});var Nn=W.f,Ln=Function.prototype,Dn=/^\s*function ([^ (]*)/;"name"in Ln||C&&Nn(Ln,"name",{configurable:!0,get:function(){try{return(""+this).match(Dn)[1]}catch(e){return""}}}),C&&"g"!=/./g.flags&&W.f(RegExp.prototype,"flags",{configurable:!0,get:w});var Rn="toString",Mn=/./[Rn],Pn=function(e){F(RegExp.prototype,Rn,e,!0)};A(function(){return"/a/b"!=Mn.call({source:"a",flags:"b"})})?Pn(function t(){var e=S(this);return"/".concat(e.source,"/","flags"in e?e.flags:!C&&e instanceof RegExp?w.call(e):undefined)}):Mn.name!=Rn&&Pn(function t(){return Mn.call(this)});var Wn=Math.max,jn=Math.min,Un=Math.floor,Vn=/\$([$&`']|\d\d?|<[^>]*>)/g,Gn=/\$([$&`']|\d\d?)/g;Z("replace",2,function(i,o,E,k){return[function(e,t){var n=i(this),r=e==undefined?undefined:e[o];return r!==undefined?r.call(e,n,t):E.call(String(n),e,t)},function(e,t){var n=k(E,e,this,t);if(n.done)return n.value;var r=S(e),i=String(this),o="function"==typeof t;o||(t=String(t));var a=r.global;if(a){var c=r.unicode;r.lastIndex=0}for(var u=[];;){var s=T(r,i);if(null===s)break;if(u.push(s),!a)break;""===String(s[0])&&(r.lastIndex=ae(i,ie(r.lastIndex),c))}for(var l,d="",f=0,g=0;g<u.length;g++){s=u[g];for(var h=String(s[0]),p=Wn(jn(ne(s.index),i.length),0),v=[],m=1;m<s.length;m++)v.push((l=s[m])===undefined?l:String(l));var y=s.groups;if(o){var w=[h].concat(v,p,i);y!==undefined&&w.push(y);var b=String(t.apply(undefined,w))}else b=_(h,i,p,v,y,t);f<=p&&(d+=i.slice(f,p)+b,f=p+h.length)}return d+i.slice(f)}];function _(o,a,c,u,s,e){var l=c+o.length,d=u.length,t=Gn;return s!==undefined&&(s=dt(s),t=Vn),E.call(e,t,function(e,t){var n;switch(t.charAt(0)){case"$":return"$";case"&":return o;case"`":return a.slice(0,c);case"'":return a.slice(l);case"<":n=s[t.slice(1,-1)];break;default:var r=+t;if(0===r)return t;if(d<r){var i=Un(r/10);return 0===i?t:i<=d?u[i-1]===undefined?t.charAt(1):u[i-1]+t.charAt(1):t}n=u[r-1]}return n===undefined?"":n})}});var Fn,$n,Bn=[].sort,Hn=[1,2,3];z(z.P+z.F*(A(function(){Hn.sort(undefined)})||!A(function(){Hn.sort(null)})||!((Fn=Bn)&&A(function(){$n?Fn.call(null,function(){},1):Fn.call(null)}))),"Array",{sort:function(e){return e===undefined?Bn.call(dt(this)):Bn.call(dt(this),$(e))}});var qn={sidLabel:"PTX_SID",funName:"ptengine",events:["track","page","identify"],dataLayer:"_pt_data_layer",antiFlickerClassName:"pt-async-hide",previewToken:"preview_ptx_token",engageEditorToken:"ptengine_engage_editor_token",engageControlgroupToken:"ptengine_engage_control_group"},zn=("https:"===location.protocol?"https://":"http://")+"egjsmonitor.ptengine.jp";function Jn(){try{var e=window.screen.width;return e?isNaN(parseInt(e,10))?0:parseInt(e,10):0}catch(t){return 0}}function Xn(){var e=self.innerWidth||document.body.clientWidth;return e=isNaN(e)?0:parseInt(e,10)}function Kn(){try{var e=window.screen.height;return(1===or()&&2e3<e||4===or()&&3e3<e)&&(e=function n(){try{var e=self.innerHeight||document.body.clientHeight;return e=isNaN(e)?0:parseInt(e,10)}catch(t){return 0}}()),e?isNaN(parseInt(e,10))?0:parseInt(e,10):0}catch(t){return 0}}function Yn(){var e=[];return 1===or()||4===or()?(e.push("."+[Xn(),Kn()].sort()[0]),e.push("."+[Xn(),Kn()].sort()[1])):(e.push("."+Jn()),e.push("."+Kn())),e.push("."+(window.screen.colorDepth||0)),e.push("."+function n(){try{var e=(new Date).getTimezoneOffset();return e||0===e?"GMT"+(e<=0?"+":"")+e/60*-1:""}catch(t){return""}}().replace(/\./g,"_")),e.push("."+(navigator.platform||"").replace(/\./g,"_").toLowerCase()),e.push("."+(navigator.language||navigator.browserLanguage||"").replace(/\./g,"_").toLowerCase()),e.push("."+(document.characterSet||document.charset||"").replace(/\./g,"_").toLowerCase()),e.join("")}function Zn(e){function u(e,t){return e<<t|e>>>32-t}function s(e,t){var n,r,i,o,a;return i=2147483648&e,o=2147483648&t,a=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^a^i^o:n|r?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o}function t(e,t,n,r,i,o,a){return s(u(e=s(e,s(s(function c(e,t,n){return e&t|~e&n}(t,n,r),i),a)),o),t)}function n(e,t,n,r,i,o,a){return s(u(e=s(e,s(s(function c(e,t,n){return e&n|t&~n}(t,n,r),i),a)),o),t)}function r(e,t,n,r,i,o,a){return s(u(e=s(e,s(s(function c(e,t,n){return e^t^n}(t,n,r),i),a)),o),t)}function i(e,t,n,r,i,o,a){return s(u(e=s(e,s(s(function c(e,t,n){return t^(e|~n)}(t,n,r),i),a)),o),t)}function o(e){var t,n="",r="";for(t=0;t<=3;t++)n+=(r="0"+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n}var a,c,l,d,f,g,h,p,v,m=Array();for(m=function y(e){for(var t,n=e.length,r=n+8,i=16*((r-r%64)/64+1),o=Array(i-1),a=0,c=0;c<n;)a=c%4*8,o[t=(c-c%4)/4]=o[t]|e.charCodeAt(c)<<a,c++;return a=c%4*8,o[t=(c-c%4)/4]=o[t]|128<<a,o[i-2]=n<<3,o[i-1]=n>>>29,o}(e),g=1732584193,h=4023233417,p=2562383102,v=271733878,a=0;a<m.length;a+=16)h=i(h=i(h=i(h=i(h=r(h=r(h=r(h=r(h=n(h=n(h=n(h=n(h=t(h=t(h=t(h=t(l=h,p=t(d=p,v=t(f=v,g=t(c=g,h,p,v,m[a+0],7,3614090360),h,p,m[a+1],12,3905402710),g,h,m[a+2],17,606105819),v,g,m[a+3],22,3250441966),p=t(p,v=t(v,g=t(g,h,p,v,m[a+4],7,4118548399),h,p,m[a+5],12,1200080426),g,h,m[a+6],17,2821735955),v,g,m[a+7],22,4249261313),p=t(p,v=t(v,g=t(g,h,p,v,m[a+8],7,1770035416),h,p,m[a+9],12,2336552879),g,h,m[a+10],17,4294925233),v,g,m[a+11],22,2304563134),p=t(p,v=t(v,g=t(g,h,p,v,m[a+12],7,1804603682),h,p,m[a+13],12,4254626195),g,h,m[a+14],17,2792965006),v,g,m[a+15],22,1236535329),p=n(p,v=n(v,g=n(g,h,p,v,m[a+1],5,4129170786),h,p,m[a+6],9,3225465664),g,h,m[a+11],14,643717713),v,g,m[a+0],20,3921069994),p=n(p,v=n(v,g=n(g,h,p,v,m[a+5],5,3593408605),h,p,m[a+10],9,38016083),g,h,m[a+15],14,3634488961),v,g,m[a+4],20,3889429448),p=n(p,v=n(v,g=n(g,h,p,v,m[a+9],5,568446438),h,p,m[a+14],9,3275163606),g,h,m[a+3],14,4107603335),v,g,m[a+8],20,1163531501),p=n(p,v=n(v,g=n(g,h,p,v,m[a+13],5,2850285829),h,p,m[a+2],9,4243563512),g,h,m[a+7],14,1735328473),v,g,m[a+12],20,2368359562),p=r(p,v=r(v,g=r(g,h,p,v,m[a+5],4,4294588738),h,p,m[a+8],11,2272392833),g,h,m[a+11],16,1839030562),v,g,m[a+14],23,4259657740),p=r(p,v=r(v,g=r(g,h,p,v,m[a+1],4,2763975236),h,p,m[a+4],11,1272893353),g,h,m[a+7],16,4139469664),v,g,m[a+10],23,3200236656),p=r(p,v=r(v,g=r(g,h,p,v,m[a+13],4,681279174),h,p,m[a+0],11,3936430074),g,h,m[a+3],16,3572445317),v,g,m[a+6],23,76029189),p=r(p,v=r(v,g=r(g,h,p,v,m[a+9],4,3654602809),h,p,m[a+12],11,3873151461),g,h,m[a+15],16,530742520),v,g,m[a+2],23,3299628645),p=i(p,v=i(v,g=i(g,h,p,v,m[a+0],6,4096336452),h,p,m[a+7],10,1126891415),g,h,m[a+14],15,2878612391),v,g,m[a+5],21,4237533241),p=i(p,v=i(v,g=i(g,h,p,v,m[a+12],6,1700485571),h,p,m[a+3],10,2399980690),g,h,m[a+10],15,4293915773),v,g,m[a+1],21,2240044497),p=i(p,v=i(v,g=i(g,h,p,v,m[a+8],6,1873313359),h,p,m[a+15],10,4264355552),g,h,m[a+6],15,2734768916),v,g,m[a+13],21,1309151649),p=i(p,v=i(v,g=i(g,h,p,v,m[a+4],6,4149444226),h,p,m[a+11],10,3174756917),g,h,m[a+2],15,718787259),v,g,m[a+9],21,3951481745),g=s(g,c),h=s(h,l),p=s(p,d),v=s(v,f);return o(g)+o(h)+o(p)+o(v)}function Qn(e){var t=e.method,n=e.data,r=e.url,i=e.callback;r=r+"?traceId="+er(),t=t||"GET";var o=new XMLHttpRequest;"withCredentials"in o?o.open(t,r,!0):"undefined"!=typeof XDomainRequest?(mn("xhr"),(o=new window.XDomainRequest).open(t,r)):(mn("xhr"),o=null),o&&(i&&(o.onreadystatechange=function(){4!==o.readyState||200!==o.status&&201!==o.status||i(o.responseText)}),o.send(n))}function er(){var e=navigator.userAgent,t=(new Date).getTime(),n=Math.random(),r=document.documentElement.clientWidth||document.body.clientWidth||0,i=0;try{i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}catch(a){}var o=nr();return Zn("ua=".concat(e,"&ts=").concat(t,"&random=").concat(n,"&bw=").concat(r,"&bh=").concat(i,"&plugins=").concat(o))}function tr(e){try{var t=[Yn()];t.push("&ua="+function r(e,t){return encodeURIComponent instanceof Function?t?encodeURI(e):encodeURIComponent(e):escape(e)}(navigator.userAgent||"",!1)),t.push("&bw="+(document.documentElement.clientWidth||document.body.clientWidth||0)),t.push("&bh="+function i(){try{var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return e?isNaN(parseInt(e,10))?0:parseInt(e,10):0}catch(t){return 0}}()),t.push("&pi="+nr()),t.push("&ts="+e);var n=t.join("");return n||(n=(new Date).getTime()+""+Math.random()),n}catch(o){return(new Date).getTime()+""+Math.random()}}function nr(){var e="",t=navigator.plugins;if(0!==t.length){for(var n=[],r=0;r<t.length;r++){n[r]=t[r].name+";"+t[r].description+";"+t[r].filename+";";for(var i=0;i<t[r].length;i++)n[r]+="("+t[r][i].description+";"+t[r][i].type+";"+t[r][i].suffixes+")";n[r]+="."}e=n.sort().join("")}return e}var rr={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,n,r,i,o){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var a="";if(n)switch(n.constructor){case Number:a=n===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:a="; expires="+n;break;case Date:a="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+a+(i?"; domain="+i:"")+(r?"; path="+r:"")+(o?"; secure":""),!0},removeItem:function(e,t,n){return!(!e||!this.hasItem(e))&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0)},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[-.+*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function st(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=0;t<e.length;t++)e[t]=decodeURIComponent(e[t]);return e}};function ir(e,t){var n=rr.getItem("ptx_"+e);return n&&-1!==n.indexOf(t)?n.split(t+"=")[1].split("&")[0]:""}function or(){try{var e=navigator.userAgent;return e?function r(){var e=navigator.platform.toLowerCase();if(-1<e.indexOf("win"))return!0;for(var t=["mac68k","macppc","macintosh","macintel"],n=0;n<t.length;n++)if(e===t[n])return!0;return!1}()||function i(e){for(var t=["AIX","Amiga","BeOS","DragonFly","FreeBSD","GNU","Haiku","HP-UX","IRIX","Joli","Java","Macintosh","Minix","MorphOS","NetBSD","OpenBSD","PClinuxOS","QNX x86pc","SunOS","Ubuntu","Mint","Red Hat","Slackware","SUSE","PCLinuxOS","Debian","Fedora","CentOS","Vine","Arch Linux","Gentoo","Kanotix","Mandriva"],n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(e)?function o(e){for(var t=["Android","AROS","Bada","BlackBerry","Chromium","CrOS","Danger Hiptop","Inferno","iPhone","iPad","iPod","Nintendo DS","Nintendo Wii","Palm OS","PLAYSTATION","Syllable","SymbOS","Symbian","Tizen","webOS","WebTV","Windows CE","Windows Mobile","Windows Phone","Xbox"],n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(e)?3:e.match(/.*MSIE.*Windows NT 6\.2;.*Touch\).*/)?4:2:-1<e.indexOf("iPad")||1e3<=Math.min(Jn(),window.screen.height)?4:1:0}catch(t){return 0}}function ar(n){if("string"==typeof n){return["?","^","$","*","+","(",")","|"].map(function(e){var t=new RegExp("(\\"+e+")","g");n=n.replace(t,"\\$1")}),n}}function cr(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=location.search.substr(1).match(t);return null!=n?decodeURIComponent(n[2]):null}function ur(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function sr(e){var t;if(e){var n=window.PT_ENGAGE_IN_DEBUG?"ptx_engager_debug":"ptx_engager",r=JSON.parse(localStorage.getItem(n)||"{}");Object.prototype.hasOwnProperty.call(r,e)&&(t=r[e])}return console.log("getDataFromStorage",e,"value",t),t}function lr(e,t){"true"==(localStorage.getItem("ptx_enableLog")||"false")&&console.log(e||"",t||"")}function dr(){return/MicroMessenger/i.test(navigator.userAgent)}function fr(e,t){var n=location.href;(new Image).src="".concat(zn,"?p=").concat(n,"t=").concat(e,"&ex=").concat(t)}function gr(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.join("")}function hr(){return localStorage.getItem(qn.sidLabel)}var pr,vr=function(){function e(){cn(this,e),this.timezone=""}return sn(e,[{key:"setTimeZone",value:function(e){this.timezone=e}},{key:"getProfileTimeStamp",value:function(){var e=0;if(this.timezone.trim()){var t,n=60*(new Date).getTimezoneOffset()*1e3*-1,r=this.timezone.replace(":"," ").split(" ");2==r.length&&(t=60*Number(r[0].slice(1))*60*1e3+60*Number(r[1])*1e3,t=Number(r[0].slice(0,1)+t));var i=n-t;e=Date.now()-i}return e}}]),e}(),mr=new(function(){function e(){cn(this,e),this.cache={}}return sn(e,[{key:"get",value:function(e){return this.cache[e]}},{key:"set",value:function(e,t){this.cache[e]=t}}]),e}()),yr=new vr,wr=(new Date).getTime(),br=window._pt_data_layer||(window._pt_data_layer=[]),Er={SILENCEDURATION:3e5,HEARTBEATINTERVAL:15e3,CLICKINTERVAL:3e3,domain:function fo(e){var t=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,n=e.split(".");(4<(n=n[n.length-1]).length||"com"===n||"org"===n)&&(t=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i);var r=e.match(t);return r?r[0]:""}(window.location.hostname),pageStartTime:wr,lastUpdateTime:wr},kr={profileId:null,pageId:null,pageviewId:null,deviceId:null,sessionId:null,vn:1,pvn:0},_r=function go(){return(br.find(function(e){return e["ptx.start"]!==undefined})||{})["ptx.start"]||wr}(),Sr=function Sr(){var i=hr();if(i){var o=[{key:"deviceId",type:"string"},{key:"sessionId",type:"string"},{key:"vn",type:"number"},{key:"pvn",type:"number"}];Object.keys(kr).forEach(function(t){var e=Cr(t);"profileId"===t&&e&&rr.removeItem("ptx_".concat(e),"/");var n=o.find(function(e){return e.key===t});if(n){var r=ir(i,t);r&&(e="number"===n.type?+r:r)}kr[t]="pvn"===t?e+1:e});var e=ir(i,"sact");e!==undefined&&""!==e&&Er.lastUpdateTime-Number(e)>Er.SILENCEDURATION&&Tr("reactivated"),Ar(),function t(){return"Safari"===function a(){var e=navigator.userAgent,t=window.ActiveXObject!==undefined&&-1!==e.indexOf("MSIE"),n=-1!==e.indexOf("Firefox"),r=window.opr!==undefined,i=-1!==e.indexOf("Chrome")&&window.chrome,o=-1!==e.indexOf("Safari")&&-1!==e.indexOf("Version");return t?"IE":n?"Firefox":r?"Opera":i?"Chrome":o?"Safari":"Unkown"}()}()&&(!function n(){pr&&pr.set(function e(){return location.host+":"+kr.profileId}(),kr,function(e){console.log("write done!")})}(),function a(){var t=document.createElement("iframe"),e="https:"===location.protocol?"https://":"http://";t.src=e+"js.ptengine.jp/tracking.html",t.setAttribute("style","width:0;height:0;border:0;border:none;display:none"),document.body.appendChild(t);var n=!1,r=setTimeout(function(){console.log("timeout timer fired ,load event got exception"),n||(n=!0),Lr()},1e3);function i(r,i){var n=0,o={};function a(e){var t="callback_"+n++;return o[t]=function(){e.apply(r,arguments)},t}window.addEventListener("message",function(e){if(console.log(e.origin,e),/js(test)?\.pt(engine|mind)\.(cn|jp)/.test(e.origin)){var t=JSON.parse(e.data),n=t.fn;n&&o[n]&&"function"==typeof o[n]&&(o[n](t.result),delete o[n])}}),this.set=function(e,t,n){r.postMessage(JSON.stringify({key:e,data:t,fn:a(n)}),i)},this.get=function(e,t){r.postMessage(JSON.stringify({key:e,fn:a(t)}),i)}}t.addEventListener("load",function(e){console.log("tracking html load event fired !"),n||(n=!0,clearTimeout(r),pr=new i(t.contentWindow,"*"),Lr())})}())}},Tr=function Tr(e){var t=kr.vn;"reactivated"===e&&(kr.vn=t+1,kr.pvn=1,kr.pageId=Cr("pageId"),kr.pageviewId=Cr("pageviewId"),kr.sessionId=Cr("sessionId"),kr.sact=Cr("sact")),Ar()},Ir=function Ir(e,t){Er[e]=t,Ar()},xr=function xr(){return["pageId","profileId","pageviewId","deviceId","sessionId"].every(function(e){return Boolean(kr[e])})},Or=function Or(){return 1===kr.vn};function Ar(){var e=kr.profileId,t=Er.domain;if(e){var n=Object.keys(kr).map(function(e){var t=kr[e];return"".concat(e,"=").concat(t,"&")});n.push("sact=".concat(Er.lastUpdateTime)),rr.setItem("ptx_".concat(e),n.join(""),{expires:1e3},"/",t)}}function Cr(e){var t="",n=new Date,r=n.getTime()+"-"+n.getDate(),i=(location.protocol+"//"+location.host).toLowerCase()+location.pathname+location.search+location.hash;switch(e){case"pageId":t=Nr(i);break;case"profileId":t=hr();break;case"pageviewId":case"sessionId":t=function o(){var e="0123456789abcdefghijklmnopqrstuvwxyz",t=e.substr(Math.floor(Math.random()*e.length),1),n=Nr(function r(){for(var e=[],t=0;t<22;t++)e[t]="0123456789abcdefghijklmnopqrstuvwxyz".substr(Math.floor(16*Math.random()),1);return e.join("")}());return t+n.substring(1)}();break;case"deviceId":t=Nr(tr(r));break;case"vn":t=1;break;case"pvn":t=0;break;case"sact":t=Er.lastUpdateTime}return t}function Nr(e){var t=Zn(e);return t&&function a(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/",n="",r=0;r<e.length/6-1;)n+=t.charAt(parseInt(e.slice(6*r,6*(r+1)),2).toString(10)),r++;var i=e.slice(6*r,6*(r+1));if(i){var o=i.length;for(r=0;r<6-o;r++)i+="0";n+=t.charAt(parseInt(i,2).toString(10))}return n}(function c(e){for(var t="",n="",r=0,i=e.length,o=0;o<i;o++){r=(n=parseInt(e.charAt(o),16).toString(2)).length;for(var a=0;a<4-r;a++)n="0"+n;t+=n}return t}(t))}function Lr(){try{window.$$__ptx_engage_$&&window.$$__ptx_engage_$.emit&&"function"==typeof window.$$__ptx_engage_$.emit&&window.$$__ptx_engage_$.emit("send.pageview")}catch(e){console.log("function noticeEngage error")}}var Dr=function(){function e(){cn(this,e)}return sn(e,[{key:"validate",value:function(){throw{name:"ImplementError",message:"validate method should be implement by "+this.constructor.name}}}]),e}(),Rr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){switch(t){case"Match":return e}return!1}}]),n}(),Mr=function(e){fn(n,Dr);var t=vn(n);function n(){var e;return cn(this,n),(e=t.call(this)).currentTerminalType=or(),e}return sn(n,[{key:"validate",value:function(e,t){switch(t){case"==":return this.currentTerminalType==e;case"!=":return this.currentTerminalType!=e}return!1}}]),n}(),Pr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n=Or()?"NV":"RV";switch(t){case"==":return n==e;case"!=":return n!=e}return!1}}]),n}(),Wr=function(e){fn(r,Dr);var n=vn(r);function r(e){var t;return cn(this,r),(t=n.call(this)).type=e,t}return sn(r,[{key:"validate",value:function(e,t){var n=this.type,r=cr(n)||"";if(!r){var i=n.toLowerCase().split("utm");r=cr(n=0<i.length&&"utm".concat(i).replace(",","_"))||""}switch(t){case"==":return r==e;case"!=":return r!=e;case"Rex":return new RegExp(e).test(r);case"[()]":return-1!=r.indexOf(e);case"[(":return new RegExp("^"+e).test(r);case")]":return new RegExp(e+"$").test(r)}return!1}}]),r}(),jr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n,r=document.referrer;switch(t){case"==":n=r==e;break;case"Rex":n=new RegExp(e).test(r);break;case"[()]":n=-1!=r.indexOf(e);break;case"[(":n=new RegExp("^"+r).test(e);break;case")]":n=new RegExp(r+"$").test(e);break;default:n=!1}return n}}]),n}(),Ur=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n,r=location.href;switch(t){case"==":n=r==e||r.slice(0,-1)==e;break;case"Rex":n=new RegExp(e).test(r);break;case"[()]":n=-1!=r.indexOf(e);break;case"![()]":n=-1==r.indexOf(e);break;case"[(":n=new RegExp("^"+ar(e)).test(r);break;case")]":n=new RegExp(ar(e)+"$").test(r);break;default:n=!1}return n}}]),n}(),Vr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n=!1;try{var r=location.href;Array.isArray(t)||(t=JSON.parse(t));for(var i=0,o=t.length;i<o;i++){var a=t[i];switch(a.pattern){case 2:n=new RegExp(a.url).test(r);break;case 3:n=new RegExp("^"+a.url).test(r);break;case 4:n=new RegExp(a.url+"$").test(r);break;case 5:n=a.url==r;break;case 8:n=-1<r.indexOf(a.url)}}}catch(c){}return n}}]),n}(),Gr=function(e){fn(n,Dr);var t=vn(n);function n(){var e;return cn(this,n),(e=t.call(this)).currentTerminalType=or(),e}return sn(n,[{key:"validate",value:function(e,t){var n=e.context,r=n.engager,i=e.current,o=e.renderObj,a=e.container,c=e.engageWrap;e=e.value;var u=!1;"=="===t&&e&&("2"==this.currentTerminalType&&setTimeout(function(){ur(document,"mousemove",function(e){e.clientY<12&&!dr()&&(o&&a&&c?o.mounted(a,c):r.emit("next",{context:n,current:i}))})},5e3),"1"!=this.currentTerminalType&&"4"!=this.currentTerminalType||dr()||(history.replaceState("beforeunload",null,null),history.pushState("back",null,null),window.addEventListener&&window.addEventListener("popstate",function(e){"beforeunload"===e.state&&(u||(u=!0,r.emit("next",{context:n,current:i})))})))}}]),n}(),Fr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n=e.context,r=n.engager,i=e.current,o=e.renderObj,a=e.container,c=e.engageWrap;switch(t){case"==":setTimeout(function(){o&&a&&c?o.mounted(a,c):r.emit("next",{context:n,current:i})},1e3*+e.value);break;case">=":setTimeout(function(){o&&a&&c?o.mounted(a,c):r.emit("next",{context:n,current:i})},1e3*(+e.value+1))}}}]),n}(),$r=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n=e.context,r=n.engager,i=e.current,o=e.renderObj,a=e.container,c=e.engageWrap;console.log("user stop action",e);var u=e.value,s=null;s=setTimeout(function(){o&&a&&c?o.mounted(a,c):r.emit("next",{context:n,current:i})},1e3*+u),ur(document,"scroll",function(){s&&(clearTimeout(s),s=null),s=setTimeout(function(){o&&a&&c?o.mounted(a,c):r.emit("next",{context:n,current:i})},1e3*+u)}),ur(document,"click",function(){s&&(clearTimeout(s),s=null),s=setTimeout(function(){o&&a&&c?o.mounted(a,c):r.emit("next",{context:n,current:i})},1e3*+u)})}}]),n}(),Br=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(r,e){var i=r.context,o=i.current,a=i.engager,c=r.renderObj,u=r.container,s=r.engageWrap,l=(r=+r.value.replace("%",""),!1);ur(document,"scroll",function(){console.log("event Scroll match"),setTimeout(function(){var e=parseInt(document.body.scrollHeight,10),t=document.documentElement.scrollTop||window.pageYOffset;isNaN(t)&&(screenTop=0);var n=(parseFloat(t)+parseInt(document.documentElement.clientHeight,10))/e*100;(Math.abs(n-r)<=2||r<=n)&&!l&&(l=!0,c&&u&&s?c.mounted(u,s):a.emit("next",{context:i,current:o}))},50)})}}]),n}(),Hr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n=e.context,r=n.current,i=n.engager,o=r.engagerId,a=e.renderObj,c=e.container,u=e.engageWrap;i.on("showEngagement.".concat(o),function(){a&&c&&u?a.mounted(c,u):i.emit("next",{context:n,current:r})})}}]),n}(),qr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n=e.context,r=e.current,i="3.0"===n.current.engageVersion?r:n.current;switch(t){case">":+JSON.parse(sr(i.popupId||i.exp_id)||"{}").seenTimes>=e.value?i.goNext=!1:i.goNext=!0}}}]),n}(),zr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t,n){var r=e.context,i=e.current,o="3.0"===r.current.engageVersion?i:r.current,a=JSON.parse(sr(o.popupId||o.exp_id||o.currentVersionId)||"{}");a.hasClosed&&+a.hasClosed>=e.value?(o.goNext=!1,e.popup.goNext=!1):(o.goNext=!0,e.popup.goNext=!0)}}]),n}(),Jr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n=e.context,r=e.current,i="3.0"===n.current.engageVersion?r:n.current;!!JSON.parse(sr(i.popupId||i.exp_id)||"{}").formSubmitted==e.value?i.goNext=!1:i.goNext=!0}}]),n}(),Xr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n=e.context,r=e.current,i="3.0"===n.current.engageVersion?r:n.current,o=JSON.parse(sr(i.popupId||i.exp_id||i.currentVersionId)||"{}");switch(t){case"==":!!o.hasClicked==e.value?(e.popup.goNext=!1,i.goNext=!1):(e.popup.goNext=!0,i.goNext=!0);break;case"!=":!!o.hasClicked!=e.value?(i.goNext=!0,e.popup.goNext=!0):(i.goNext=!1,e.popup.goNext=!1)}}}]),n}(),Kr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n,r=yr.getProfileTimeStamp(),i=r||Date.now();if(i=String(i).slice(0,-3),Array.isArray(e)||(e=[e]),0<e.length){var o=e[0]?i-e[0]:"",a=e[1]?e[1]-i:"";n=a?0<=a&&0<=o:o&&0<=o}else n=!0;return n}}]),n}(),Yr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n=yr.getProfileTimeStamp(),r=(n?new Date(n):new Date).getDay();return Array.isArray(e)||(e=[e]),0==e.length||7==e.length||-1<e.indexOf(r)}}]),n}(),Zr=function(e){fn(n,Dr);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"validate",value:function(e,t){var n=yr.getProfileTimeStamp(),r=n?new Date(n):new Date,i=r.getHours(),o=(i=i<10?"0"+i:i)+":"+r.getMinutes();Array.isArray(e)||(e=[e]);var a=!1;if(0<e.length){var c=e[0],u=e[1];c<=o&&o<=u&&(a=!0)}else a=!0;return a}}]),n}();function Qr(e){var t=mr.get(e);if(!t){switch(e){case"TerminalType":t=new Mr;break;case"VisitType":t=new Pr;break;case"utmCampaign":case"utmSource":case"utmMedium":case"utmContent":case"utmTerm":t=new Wr(e);break;case"EntryPage":t=new jr;break;case"URL":t=new Ur;break;case"PageGroup":t=new Vr;break;case"UserBlur":t=new Gr;break;case"UserStay":t=new Fr;break;case"UserStop":t=new $r;break;case"ScrollMatch":t=new Br;break;case"ShownByJs":t=new Hr;break;case"UtmParameter":t=new Wr;break;case"ClickButton":t=new Xr;break;case"SeenTimes":t=new qr;break;case"CloseTimes":t=new zr;break;case"FormSubmitted":t=new Jr;break;case"Dater":t=new Kr;break;case"Week":t=new Yr;break;case"Time":t=new Zr;break;case"AsyncUserProps":t=new Rr}mr.set(e,t)}return t}var ei=function(){function r(e,t,n){cn(this,r),this.value=e,this.condition=t,this.validator=n,console.log("validatevlue",e)}return sn(r,[{key:"setValue",value:function(e){this.value=e}},{key:"setCondition",value:function(e){this.condition=e}},{key:"setValidator",value:function(e){this.validator=e}},{key:"run",value:function(){var e;try{return this.validator.validate(this.value,this.condition)}catch(t){lr(t.name,t.message),e=!1}return e}}]),r}();function ti(e,t,n){return new ei(e,t,n)}function ni(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:[],n=!1,r=(t||[])[0]||{}||{},i=r.type;r.condition;if("ALL"===i||"URL"===i)n=!0;else for(var o=0,a=t.length;o<a;o++){var c=t[o];if(c.type&&(e.setValue(c.value),e.setCondition(c.condition),e.setValidator(Qr(c.type)),n=n||e.run()))break}return n}function ri(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:[],t=!0;if(e&&0<e.length)for(var n=0;n<e.length;n++)if(0===e[n].status){t=!1;break}return t}function ii(e,t){var n=2<arguments.length&&arguments[2]!==undefined?arguments[2]:[],r=3<arguments.length?arguments[3]:undefined,i=4<arguments.length?arguments[4]:undefined;Array.isArray(n)||(n=[n]);var o=!0;if(n&&0<n.length){yr.setTimeZone(""),!i&&yr.setTimeZone(r||"");for(var a=0;a<n.length;a++){var c=n[a];if(t.setValue(c.value),t.setValidator(Qr(c.type)),!t.run()){o=!1;break}}}return o}var oi=function oi(e,t){if(lr("the value of configs is:",t),t&&Array.isArray(t))for(var n=ti(),r=0,i=t.length;r<i;r++){var o=t[r];if("3.0"!==o.engageVersion){for(var a=o.timezone,c=o.experiments,u=o.rates,s=c.rate||u,l=0,d=0,f=[],g=0,h=s.length;g<h;g++)f.push({min:100*d,max:100*(d+s[g])}),d+=s[g];var p=kr.deviceId;lr("uid =",p);for(var v=gr(p)%99,m=0,y=f.length;m<y;m++)if(v>=f[m].min&&v<f[m].max){l=m;break}lr("local version",l),lr(f),lr("random number is"+v,"whione = "+l);var w=c.experiment?c.experiment[l]:c[l];w&&(e.current=w,e.current.engagerId=o.engageId);var b=e.current;b.when=b.config.when;var E=b.when;Array.isArray(E)||(E=[E]);var k=!1,_=!1;if(E[0]&&"URL"===E[0].type&&"![()]"===E[0].condition&&(k=_=!0),E[0]&&"ALL"===E[0].type)k=!0;else for(var S=0,T=E.length;S<T;S++){var I=E[S];if(I.type){if(n.setValue(I.value),n.setCondition(I.condition),n.setValidator(Qr(I.type)),k=_?k&&n.run():k||n.run(),lr("current context ",e.current),lr("validate value",n),_&&!k)break;if(!_&&k)break}}if(lr("the result of validation",k),k){lr("ready to validate the current session condition",b);var x=!0;if(b.config.session&&0<b.config.session.length)for(var O=0;O<b.config.session.length;O++)if(0===b.config.session[O].status){x=!1;break}if(x){if(lr("ready to validate the stopToDisplay condition",b),b.stopToDisplay=b.stopToDisplay||b.config.stop,b.stopToDisplay&&0<b.stopToDisplay.length)for(var A=b.stopToDisplay,C=0,N=A.length;C<N;C++){var L=A[C];if(n.setValue({value:L.value,current:e.current,context:e}),n.setCondition(L.condition),n.setValidator(Qr(L.type)),n.run(),!e.current.goNext){lr("satisfied with stopToDisplay condition,stop to render engage");break}}else e.current.goNext=!0;lr("validate displayTime condition",b);var D=!0;if(b.displayTime=b.displayTime||b.config.schedule,b.timezone=a||b.config.timezone&&b.config.timezone.profile,b.displayTime&&0<b.displayTime.length){var R=b.displayTime,M=(b.config.timezone||{}).useVisitor;yr.setTimeZone(""),!M&&yr.setTimeZone(a||""),Array.isArray(R)||(R=[R]);for(var P=0;P<R.length;P++){var W=R[P];if(n.setValue(W.value),n.setValidator(Qr(W.type)),lr("the result of dispalyTime validation",n.run()),!n.run()){D=!1,lr("not satisfied with dispalyTime condition",n);break}}}if(lr("validate startToDisplay condition",b),D&&e.current.goNext)if(b.startToDisplay=b.startToDisplay||b.config.start,b.startToDisplay&&0<b.startToDisplay.length){var j=b.startToDisplay;Array.isArray(j)||(j=[j]);for(var U=0,V=j.length;U<V;U++){var G=j[U];n.setValue({value:G.value,current:e.current,context:e}),n.setCondition(G.condition),n.setValidator(Qr(G.type)),n.run(),lr("delay to enter the render staged...")}}else lr("enter the render staged immediate..."),e.engager.emit("next",e)}}}else{var F=o,$=(F.engageId,F.versions),B=(F.goals,F.schedule),H=F.conditions,q=F.timezone,z=((B||[])[0]||{timezone:{}}).timezone.useVisitor,J=(H||[])[0]||{},X=J.when,K=J.session,Y=$&&$[0];if(!Y)continue;if(Y&&(F.currentVersionId=Y.versionId,e.current=F),!ni(n,X))continue;if(!ri(K||[]))continue;e.current.goNext=!0,ii(e,n,((B||[])[0]||{}).versionData||[],q,z)&&e.engager.emit("next",e)}}};var ai={DATA_WIDGET_ID:"data-engage-widget-id",MASKLAYERPPREFIX:"pt_mask_",POSITION:"position"};function ci(e){var t=e.querySelector("[".concat(ai.DATA_WIDGET_ID,"]"));return t&&t.getAttribute(ai.DATA_WIDGET_ID)||""}function ui(e,t){var n,r=mr.get(ai.POSITION)||[];return(n=1==+e?!r.length:!(-1<r.indexOf(t)))&&(r[r.length]=t,mr.set(ai.POSITION,r)),n}function si(e){var t=document.querySelector(".engage-layer");t||(t=document.createElement("div")).classList.add("engage-layer");var n="".concat(ai.MASKLAYERPPREFIX).concat(e),r=document.getElementsByTagName("html")[0];r.classList.add("engage-layer-open"),r.classList.add(n);var i=document.body;i.classList.add("engage-layer-open"),i.classList.add(n),i.appendChild(t)}function li(e){var t=document.querySelector(".engage-layer");if(t){var n="".concat(ai.MASKLAYERPPREFIX).concat(e),r=["engage-layer-open",n],i=document.getElementsByTagName("html")[0],o=document.body;Array.prototype.slice.call(document.body.classList).filter(function(e){return"engage-layer-open"==e||/^pt_mask_/.test(e)}).reverse().join("")==r.reverse().join("")?(o.removeChild(t),r.forEach(function(e){i.classList.remove(e),o.classList.remove(e)})):(i.classList.remove(n),o.classList.remove(n))}}function di(e,t){var n=2<arguments.length&&arguments[2]!==undefined?arguments[2]:"view",r=3<arguments.length?arguments[3]:undefined,i=e.setting.sid||hr(),o=t.engagerId,a=t.exp_id,c=t.variant||{},u=t.triggerCondition;r&&(c=dn(dn({},c),{},{target:r})),e.send(n,{sid:i,engagerId:o,engagerVerId:a,variant:c,triggerCondition:u})}function fi(e){var t=mr.get(ai.POSITION)||[],n=t.indexOf(e);-1!==n&&(t.splice(n,1),mr.set(e,t))}function gi(e){var t=e.querySelector('[data-engage-block="branding"]');if(t){var n=(t.href||"").replace(/(utm_source=)Customer-Site/,"$1"+location.hostname);t.setAttribute("href",n)}}function hi(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:"seenTimes",n=sr(e);null==n?n={seenTimes:1,hasClosed:0,hasClicked:0,formSubmitted:0}:(n=JSON.parse(n))[t]=Number(n[t]||0)+1,function i(e,t){if(e){var n=window.PT_ENGAGE_IN_DEBUG?"ptx_engager_debug":"ptx_engager",r=JSON.parse(localStorage.getItem(n)||"{}");r[e]=t,localStorage.setItem(n,JSON.stringify(r))}}(e,JSON.stringify(n))}function pi(e){Array.prototype.slice.call(e.querySelectorAll("script")).forEach(function(e){var t=document.createElement("script"),n="\n                try {\n                    (function(){".concat(e.innerHTML,"})();\n                } catch (error) {\n                    console.warn(error);\n                }");t.innerHTML=n;var r=document.getElementsByTagName("head")[0];r.appendChild(t),r.removeChild(t)})}function vi(e,t){var n=t&&document.querySelector("#link_"+t);n&&document.getElementsByTagName("head")[0].removeChild(n);var r=document.createElement("style");r.type="text/css",r.id="link_"+t,r.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(r)}function mi(e,r){var t=new RegExp("([^\r\n,{}]+)(,(?=[^}]*{)|s*{)","g");return e=e.replace(t,function(e,t,n){return t.match(/^\s*(@media|@.*keyframes|to|from|@font-face|1?[0-9]?[0-9])/)?t+n:(t.match(/:scope/)&&(t=t.replace(/([^\s]*):scope/,function(e,t){return""===t?"> *":"> "+t})),(t=t.replace(/^(\s*)/,"$1"+r+" "))+n)})}var yi=function(){function r(e,t,n){cn(this,r),this.context=e,this.current=t,this.terminal=null,this.currentWidgetIndex=0,this.container=null,this.engageWrap=null,this.renderList=null,this.currentWidgetConfig=null,this.callback=n,this.showMask=!1,this.config={DATA_BLOCK:"data-engage-block",DATA_WIDGET_ID:"data-engage-widget-id",DATA_SHOW_ENGAGE:"data-show-engage",DATA_GOTO_WIDGET:"data-goto-widget",DATA_ACTION_CLICK:"data-engage-action-click",DATA_ACTION_CLOSE:"data-engage-action-close",BUTTON_URL:"button-url",BUTTON_TEL:"button-tel",BUTTON_CLOSE:"button-close",BUTTON_GOTO_WIDGET:"button-goto-widget",ICON_CLOSE:"icon-close",POSITION:"position",CENTERPOSITION:"pos-center",LAYOUTMODE:"layoutMode",VISUALMODEL:"visualModel",CODEMODEL:"codeModel",MASKLAYERPPREFIX:"pt_mask_"}}return sn(r,[{key:"_getRenderList",value:function(){return this.terminal.widgets.reduce(function(e,t){var n=t.widgetNodes,r=n.html,i=n.css,o=n.script,a=void 0===o?"":o;return e.push({html:r+a,css:i}),e},[])}},{key:"_getWidget",value:function(e){return!(e<0||e>this.renderList.length-1)&&this.renderList[e]}},{key:"_getWidgetConfig",value:function(e){var t=this.terminal.widgets;return!(e<0||e>t.length-1)&&(console.log("this.terminal.widgets",this.terminal.widgets[e]),this.terminal.widgets[e])}},{key:"_gotoPrev",value:function(){var e=this.currentWidgetIndex-1;0<=e&&(this.currentWidgetIndex=e,this.render())}},{key:"_gotoNext",value:function(e){var t=this.renderList.length-1,n=this.currentWidgetIndex+1;n<=t&&(this.currentWidgetIndex=n,e&&this.currentWidgetConfig.widgetMode===this.config.VISUALMODEL&&fi(this.currentWidgetConfig.visualModel.widgetSettings.position),this.render())}},{key:"_addEventHandler",value:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}},{key:"_handleGotoWidgetClick",value:function(e){var t=e.getAttribute(this.config.DATA_GOTO_WIDGET);"prev"===t?this._gotoPrev():"next"===t&&this._gotoNext()}},{key:"_handleCloseClick",value:function(e){this._execWidgetEvent(e,"unmounted")}},{key:"_execWidgetEvent",value:function(e,t,n){window.ptEngage=window.ptEngage||{};var r=ci(e),i=window.ptEngage[r]||[];0<i.length&&(i.map(function(e){e[t]&&"function"==typeof e[t]&&e[t](),n&&"function"==typeof n&&(e.callback=n)}),r&&"unmounted"===t&&delete window.ptEngage[r])}},{key:"updateState",value:function(e,t){Object.prototype.hasOwnProperty.call(this,e)&&(this[e]=t)}},{key:"triggerEvent",value:function(e,t){this._execWidgetEvent(this.engageWrap,e,t)}},{key:"_renderHtmlCssAndScript",value:function(e){console.log(" _renderHtmlCssAndScript",e);var t=this._getWidget(this.currentWidgetIndex);if(t){var n=t.html,r=t.css,i='div[data-pt-engage-id="'.concat(this.currentWidgetConfig.widgetId,'"]');n=e?function o(e,t){return'<div data-pt-engage-id="'.concat(t,'">').concat(e,"</div>")}(n,this.currentWidgetConfig.widgetId):n,(r=e?mi(r,i):r)&&vi(r,this.currentWidgetConfig.widgetId),n&&(this.engageWrap.innerHTML=n),this.engageWrap.style.display="none",this.container&&this.container.appendChild(this.engageWrap),this.triggerEvent("unmounted"),pi(this.engageWrap),this.engageWrap.style.display="block",this.triggerEvent("mounted",function(e){e&&"function"==typeof e&&e(this.current.engagerId)})}}},{key:"_subscribeClickEvent",value:function(l,d,f){var g=this,h=d.current;this._addEventHandler(l,"click",function(e){for(var n=(e=e||window.event).target||e.srcElement,r=[g.config.DATA_ACTION_CLICK,g.config.DATA_ACTION_CLOSE],t=!1,i="";i=n.getAttribute(g.config.DATA_BLOCK),!(t=function(){for(var e=0,t=r.length;e<t;e++)if(n.getAttribute(r[e]))return!0}())&&(n=n.parentNode),!t&&n!=l;);if(t){e.preventDefault();var o=n.tagName.toUpperCase(),a=n.textContent||o||"unknow target";if(n.parentNode&&"image"==n.parentNode.getAttribute("data-engage-block")){var c=n.querySelector("img");c&&(a=c.getAttribute("alt"))}if(i&&(i===g.config.BUTTON_CLOSE||i===g.config.ICON_CLOSE)){l&&g.container.removeChild(l),g.showMask&&li(g.currentWidgetConfig.widgetId),di(g.context,g.current,"close",a),lr("has close"),f&&"function"==typeof f&&f(g.current.exp_id,"hasClosed");try{g.currentWidgetConfig.widgetMode===g.config.VISUALMODEL&&fi(g.currentWidgetConfig.visualModel.widgetSettings.position)}catch(u){}return}if(i&&i===g.config.BUTTON_GOTO_WIDGET){try{g.currentWidgetConfig.widgetMode===g.config.VISUALMODEL&&fi(g.currentWidgetConfig.visualModel.widgetSettings.position),g.showMask&&li(g.currentWidgetConfig.widgetId),di(d,h,"click",a)}catch(e){console.log(e)}g._handleGotoWidgetClick(n)}else di(d,h,"click",a);if(n.href&&!/^javascript:(void\(0\))?;?$/.test(n.href))if("_blank"==n.target)try{window.open(n.href,"_blank")}catch(s){lr("not support to use window.open",s)}else window.location.href=n.href;f&&"function"==typeof f&&f(h.exp_id)}})}},{key:"render",value:function(){var e=this._getWidgetConfig(this.currentWidgetIndex);if(this.currentWidgetConfig=e){var t=e.widgetMode!==this.config.CODEMODEL,n=e.widgetMode===this.config.LAYOUTMODE,r=n?e.widgetSettings&&e.widgetSettings.position:e.visualModel&&e.visualModel.widgetSettings&&e.visualModel.widgetSettings.position;if(t){if(!(r&&ui(this.terminal.type,r)))return;if(this._renderHtmlCssAndScript(n),!(this.engageWrap&&"false"!==this.engageWrap.getAttribute(this.config.DATA_SHOW_ENGAGE))){var i=mr.get(this.config.POSITION)||[],o=i.indexOf(r);return void(-1!==o&&(i.splice(o,1),mr.set(this.config.POSITION,i)))}}else this._renderHtmlCssAndScript(!0);if(n){var a=this.engageWrap.querySelector('[data-engage-block="engage"]');e.widgetSettings&&!e.widgetSettings.showMask?(a.style.left="auto",a.style.right="auto",a.style.top="auto",a.style.bottom="auto"):e.widgetSettings.showMask&&(a.style.position="fixed")}else(r&&r===this.config.CENTERPOSITION||this.engageWrap.querySelector("[data-pt-showmask]"))&&(this.showMask=!0,si(e.widgetId));gi(this.engageWrap)}}},{key:"mounted",value:function(e,t){this.container=e,this.engageWrap=t,this.terminal=this.current&&this.current.currentTerminal,this.submitCallback=function(e,t){this.showMask&&li(this.currentWidgetConfig.widgetId),di(e,t,"submit"),hi(t.exp_id,"formSubmitted")},this.updateRenderedPositionCache=fi,this.renderList=this._getRenderList(),this.render(),window.ptEngage=window.ptEngage||{},window.ptEngage&&(window.ptEngage[this.current.engagerId]=this),console.log("window.ptEngage in preview store",window.ptEngage),this._subscribeClickEvent(this.engageWrap,this.context,function(e){hi(e,1<arguments.length&&arguments[1]!==undefined?arguments[1]:"hasClicked")}),this.callback&&"function"==typeof this.callback&&this.callback()}},{key:"unmounted",value:function(){}}]),r}(),wi=function(){function n(e,t){cn(this,n),this.inline=e,this.callback=t,this.tags={REPLACE:0,INSERT:1,APPEND:2,BEFORE:3,AFTER:4},this.docmentFirstCSSStyleSheet=null}return sn(n,[{key:"_selector",value:function(e){return e&&document.querySelector(e)}},{key:"_getFirstCSSStyleSheet",value:function(e){if(this.docmentFirstCSSStyleSheet)return this.docmentFirstCSSStyleSheet;for(var t=e.styleSheets.length-1;0<=t;t--){var n=e.styleSheets[t];if(!n.href){var r=n.ownerNode;if(r&&r.parentNode&&"HEAD"===r.parentNode.tagName)return this.docmentFirstCSSStyleSheet=n}}return 0===e.styleSheets.length&&e.createStyleSheet(),this.docmentFirstCSSStyleSheet=e.styleSheets[0]}},{key:"_getNewStyleSheet",value:function(e,t){var n=(t||document).createElement("style");return n.cssText!==undefined?n.cssText=e:n.innerHTML=e,n}},{key:"_addStyleSheetToHead",value:function(e,t){var n=t||document,r=n.getElementsByTagName("head")[0];r||(r=n.createElement("head"),n.body.parentNode.insertBefore(r,n.body)),r.appendChild(e)}},{key:"_addStyleSheet",value:function(e,t,n,r,i){var o=e+"{"+t+": "+n+(r?" !important":"")+"}";if(i&&(o=i+"{"+o+"}"),document.createStyleSheet){var a=this._getFirstCSSStyleSheet(document),c=a.rules.length;return a.insertRule(o,c),function(){a.deleteRule?a.deleteRule(c):a.removeRule(c),a.insertRule("x {}",c)}}var u=this._getNewStyleSheet(o,document);this._addStyleSheetToHead(u,document);var s=u.parentNode;return function(){s.removeChild(u)}}},{key:"_setStyleProperty",value:function(e,t,n,r){if(e.style.setProperty)try{var i=e.style.getPropertyValue(t),o=e.style.getPropertyPriority(t);return e.style.setProperty(t,n,r?"important":""),function(){e.style.setProperty(t,"",o),e.style.setProperty(t,i,o)}}catch(c){}var a=e.style.cssText;return e.style.cssText+=";"+t+": "+n+(r?" !important":"")+";",function(){e.style.cssText=a}}},{key:"_setAttribute",value:function(e,t,n){try{null===n?e.removeAttribute(t):e.setAttribute(t,n)}catch(r){return r}return null}},{key:"_replace",value:function(e){var t=e.elementText,n=(e.type,t.identifier,t.selector),r=(t.continueUndo,t.text),i=(t.childIndex,this._selector(n.string));i&&i.innerText&&(i.innerText=r.string)}},{key:"_remove",value:function(e){var t=e.elementStyle,n=(e.type,t.property),r=t.value,i=t.selector,o=t.identifier,a=t.cssRule,c=t.important,u=t.cssConditional,s=n&&n.string,l=r&&r.string,d=c&&c.string,f=i&&i.string,g=(o&&o.string,u&&u.string);if(f)if(a)this._addStyleSheet(f,s,l,d,g);else{var h=document.querySelector(f);h&&this._setStyleProperty(h,s,l,d)}}},{key:"_updateAttribute",value:function(e){var t=e.changeElementAttribute,n=(e.type,t.attribute),r=t.value,i=t.selector,o=t.identifier,a=t.affectsSelectors,c=n&&n.string,u=r&&r.string,s=i&&i.string;o&&o.string,a&&a.string;if(s&&document.documentElement.setAttribute){var l=document.querySelector(s);l&&this._setAttribute(l,c,u)}}},{key:"mounted",value:function(){var t=this,e=this.inline||{},n=e.changeElementAttribute,r=e.elementText;if(e.elementStyle)this._remove(this.inline);else if(n)this._updateAttribute(this.inline);else{var i=(r||{}).mode;switch(Object.keys(this.tags).find(function(e){return t.tags[e]===i})){case"REPLACE":this._replace(this.inline);break;case"INSERT":case"APPEND":case"BEFORE":case"AFTER":break;default:console.log("vtp_mode error")}}this.callback()}}]),n}(),bi={f:Object.getOwnPropertySymbols},Ei=Object.assign,ki=!Ei||A(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=Ei({},e)[n]||Object.keys(Ei({},t)).join("")!=r})?function(e,t){for(var n=dt(e),r=arguments.length,i=1,o=bi.f,a=me.f;i<r;)for(var c,u=ye(arguments[i++]),s=o?Fe(u).concat(o(u)):Fe(u),l=s.length,d=0;d<l;)a.call(u,c=s[d++])&&(n[c]=u[c]);return n}:Ei;z(z.S+z.F,"Object",{assign:ki});var _i=function(){function u(e,t,n,r,i,o,a){cn(this,u);var c=r.widgets;this.engageId=e,this.versionId=t,this.popup=r,this.terminalType=n,this.widgets=c||[],this.context=i,this.current=o,this.currentWidgetIndex=0,this.container=null,this.engageWrap=null,this.renderList=null,this.currentWidgetConfig=null,this.callback=a,this.showMask=!1,this.config={DATA_BLOCK:"data-engage-block",DATA_WIDGET_ID:"data-engage-widget-id",DATA_SHOW_ENGAGE:"data-show-engage",DATA_GOTO_WIDGET:"data-goto-widget",DATA_ACTION_CLICK:"data-engage-action-click",DATA_ACTION_CLOSE:"data-engage-action-close",BUTTON_URL:"button-url",BUTTON_TEL:"button-tel",BUTTON_CLOSE:"button-close",BUTTON_GOTO_WIDGET:"button-goto-widget",ICON_CLOSE:"icon-close",POSITION:"position",CENTERPOSITION:"pos-center",LAYOUTMODE:"layoutMode",VISUALMODEL:"visualModel",MASKLAYERPPREFIX:"pt_mask_"}}return sn(u,[{key:"_getRenderList",value:function(){return this.widgets.reduce(function(e,t){var n=t.widgetNodes,r=n.html,i=n.css,o=n.script,a=void 0===o?"":o;return e.push({html:r+a,css:i}),e},[])}},{key:"_getWidget",value:function(e){return!(e<0||e>this.renderList.length-1)&&this.renderList[e]}},{key:"_getWidgetConfig",value:function(e){return!(e<0||e>this.widgets.length-1)&&this.widgets[e]}},{key:"_gotoPrev",value:function(){var e=this.currentWidgetIndex-1;0<=e&&(this.currentWidgetIndex=e,this.render())}},{key:"_gotoNext",value:function(e){var t=this.renderList.length-1,n=this.currentWidgetIndex+1;n<=t&&(this.currentWidgetIndex=n,e&&this.currentWidgetConfig.widgetMode===this.config.VISUALMODEL&&fi(this.currentWidgetConfig.visualModel.widgetSettings.position),this.render())}},{key:"_addEventHandler",value:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}},{key:"_handleGotoWidgetClick",value:function(e){var t=e.getAttribute(this.config.DATA_GOTO_WIDGET);"prev"===t?this._gotoPrev():"next"===t&&this._gotoNext()}},{key:"_handleCloseClick",value:function(e){this._execWidgetEvent(e,"unmounted")}},{key:"_execWidgetEvent",value:function(e,t,n){window.ptEngage=window.ptEngage||{};var r=ci(e),i=window.ptEngage[r]||[];0<i.length&&(i.map(function(e){e[t]&&"function"==typeof e[t]&&e[t](),n&&"function"==typeof n&&(e.callback=n)}),r&&"unmounted"===t&&delete window.ptEngage[r])}},{key:"updateState",value:function(e,t){Object.prototype.hasOwnProperty.call(this,e)&&(this[e]=t)}},{key:"triggerEvent",value:function(e,t){this._execWidgetEvent(this.engageWrap,e,t)}},{key:"_renderHtmlCssAndScript",value:function(){var e=this._getWidget(this.currentWidgetIndex);if(e){var t=e.html,n=e.css;(n=mi(n,"#engage_".concat(this.popup.popupId)))&&vi(n,this.currentWidgetConfig.widgetId),t&&(this.engageWrap.innerHTML=t),this.engageWrap.style.display="none",this.container&&this.container.appendChild(this.engageWrap),this.triggerEvent("unmounted"),pi(this.engageWrap),this.engageWrap.style.display="block",this.triggerEvent("mounted",function(e){e&&"function"==typeof e&&e(this.engageId)})}}},{key:"_subscribeClickEvent",value:function(l,d,f){var g=this;this._addEventHandler(l,"click",function(e){for(var n=(e=e||window.event).target||e.srcElement,r=[g.config.DATA_ACTION_CLICK,g.config.DATA_ACTION_CLOSE],t=!1,i="";i=n.getAttribute(g.config.DATA_BLOCK),!(t=function(){for(var e=0,t=r.length;e<t;e++)if(n.getAttribute(r[e]))return!0}())&&(n=n.parentNode),!t&&n!=l;);if(t){e.preventDefault();var o=n.tagName.toUpperCase(),a=n.textContent||o||"unknow target";if(n.parentNode&&"image"===n.parentNode.getAttribute("data-engage-block")){var c=n.querySelector("img");c&&(a=c.getAttribute("alt"))}if(i&&(i===g.config.BUTTON_CLOSE||i===g.config.ICON_CLOSE)){l&&g.container.removeChild(l),g.showMask&&li(g.currentWidgetConfig.widgetId),di(g.context,g.current,"close",a),lr("has close"),f&&"function"==typeof f&&f(g.popup.popupId,"hasClosed");try{g.currentWidgetConfig.widgetMode===g.config.VISUALMODEL&&fi(g.currentWidgetConfig.visualModel.widgetSettings.position)}catch(u){}return}if(i&&i===g.config.BUTTON_GOTO_WIDGET){try{g.currentWidgetConfig.widgetMode===g.config.VISUALMODEL&&fi(g.currentWidgetConfig.visualModel.widgetSettings.position),g.showMask&&li(g.currentWidgetConfig.widgetId),di(d,g.current,"click",a)}catch(e){console.log(e)}g._handleGotoWidgetClick(n)}else di(d,g.current,"click",a);if(n.href&&!/^javascript:(void\(0\))?;?$/.test(n.href))if("_blank"===n.target)try{window.open(n.href,"_blank")}catch(s){lr("not support to use window.open",s)}else window.location.href=n.href;f&&"function"==typeof f&&f(g.popup.popupId)}})}},{key:"render",value:function(){var e=this._getWidgetConfig(this.currentWidgetIndex);if(this.currentWidgetConfig=e){var t=e.widgetSettings&&e.widgetSettings.position;if(!(t&&ui(this.terminalType,t)))return;if(this._renderHtmlCssAndScript(),this.renderAfter(),!(this.engageWrap&&"false"!==this.engageWrap.getAttribute(this.config.DATA_SHOW_ENGAGE))){var n=mr.get(this.config.POSITION)||[],r=n.indexOf(t);return void(-1!==r&&(n.splice(r,1),mr.set(this.config.POSITION,n)))}var i=this.engageWrap.querySelector('[data-engage-block="engage"]');i&&(e.widgetSettings&&!e.widgetSettings.showMask?(i.style.left="auto",i.style.right="auto",i.style.top="auto",i.style.bottom="auto"):e.widgetSettings.showMask&&(i.style.position="fixed")),gi(this.engageWrap)}}},{key:"renderAfter",value:function(){window.ptEngage=window.ptEngage||{},window.ptEngage&&(window.ptEngage[this.engageId]=this),this._subscribeClickEvent(this.engageWrap,this.context,function(e){hi(e,1<arguments.length&&arguments[1]!==undefined?arguments[1]:"hasClicked")}),this.callback&&"function"==typeof this.callback&&this.callback()}},{key:"mounted",value:function(e,t){var n=this;this.container=e,this.engageWrap=t,this.submitCallback=function(e,t){n.showMask&&li(n.currentWidgetConfig.widgetId),di(e,t,"submit"),hi(n.popup.popupId,"formSubmitted")},this.updateRenderedPositionCache=fi,this.renderList=this._getRenderList(),this.render()}},{key:"unmounted",value:function(){}}]),u}(),Si=function(){function r(e,t,n){cn(this,r),this.type=e,this.code=t,this.callback=n}return sn(r,[{key:"_getDocHead",value:function(){var e=document.getElementsByTagName("head")[0];return e||(e=document.createElement("head"),document.body.parentNode.insertBefore(e,document.body)),e}},{key:"_createStyleElement",value:function(e){var t=document.createElement("style");return t.cssText!==undefined?t.cssText=e:t.innerHTML=e,t}},{key:"_createScriptElement",value:function(e){var t=document.createElement("script"),n="\n                try {\n                    (function(){".concat(e,"})();\n                } catch (error) {\n                    console.warn(error);\n                }");return t.innerHTML=n,t}},{key:"_attachElementToHead",value:function(e){this._getDocHead().appendChild(e)}},{key:"_addStyle",value:function(e){var t=this._createStyleElement(e);this._attachElementToHead(t)}},{key:"_runScript",value:function(e){var t=this._createScriptElement(e),n=this._getDocHead();n.appendChild(t),n.removeChild(t)}},{key:"mounted",value:function(){switch(this.type){case"css":this._addStyle(this.code);break;case"javascript":this._runScript(this.code)}this.callback&&this.callback()}}]),r}(),Ti=function(){function i(e,t,n,r){cn(this,i),this.context=e,this.engage=t,this.terminalType=n,this.callback=r,this.currentVersion=null,this.currentTerminal=null,this.isSendVersionEvent=!1,this.config={CONTAINERID:"ptxEngage",currentRenderInstance:null},this.mounted()}return sn(i,[{key:"_sendVersionEvent",value:function(){if(!this.isSendVersionEvent){this.isSendVersionEvent=!0;var e=(this.currentVersion||{}).versionId;e&&window.ptengine&&window.ptengine.track("ptx_campaign_".concat(e))}}},{key:"_getTerminalInfo",value:function(e,t){for(var n=null,r=0,i=e.length;r<i;r++)if(e[r].type===t){n=e[r];break}return n}},{key:"_createEngageWrap",value:function(e){var t=document.getElementById(e);return t||(t=document.createElement("div")).setAttribute("id",e),t}},{key:"_getEngageWrapperId",value:function(e){return"engage_"+e}},{key:"_getEngageContainerWrapper",value:function(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:"",t=document.getElementById(this.config.CONTAINERID);return t||((t=document.createElement("div")).setAttribute("id",this.config.CONTAINERID+"_"+e),document.body.appendChild(t)),t}},{key:"_checkPopupTrigger",value:function(e,t,n,r,i,o){var a=!1,c=["start"];this.engage.triggerFlag&&c.unshift("stop");for(var u=0;u<c.length;u++){for(var s=c[u],l=n.trigger[s]||[],d=0;d<l.length;d++){var f=l[d];if(t.setValue({value:f.value,current:n,context:e,container:r,engageWrap:i,renderObj:o}),t.setCondition(f.condition),t.setValidator(Qr(f.type)),t.run(),"stop"===s&&!n.goNext){a=!0;break}}if(a)break}a||0!==(n.trigger.start||[]).length||(lr("enter the render staged immediate..."),o.mounted(r,i))}},{key:"_renderPopup",value:function(){var c=this,e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:[],u=this.engage.engageId,s=this.currentVersion.versionId,l=this.context;e.forEach(function(e){var t=e.popupId,n=ti(),r=c._getEngageContainerWrapper(t),i=c._createEngageWrap(c._getEngageWrapperId(t)),o=Object.assign({},c.engage,{engagerId:u,exp_id:s,variant:{creativeId:t,creativeType:"popup"}}),a=new _i(u,s,c.terminalType,e,c.context,o,function(){e.renderFinish||(e.renderFinish=!0,c._sendVersionEvent(),di(c.context,o,"view"),hi(t))});c._checkPopupTrigger(l,n,e,r,i,a)})}},{key:"_renderStickybar",value:function(){var c=this,e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:[],u=this.engage.engageId,s=this.currentVersion.versionId,l=this.context;e.forEach(function(e){var t=e.popupId,n=ti(),r=c._getEngageContainerWrapper(t),i=c._createEngageWrap(c._getEngageWrapperId(t)),o=Object.assign({},c.engage,{engagerId:u,exp_id:s,variant:{creativeId:t,creativeType:"stickybar"}}),a=new _i(u,s,c.terminalType,e,c.context,o,function(){e.renderFinish=!0,c._sendVersionEvent(),di(c.context,o,"view"),hi(t)});c._checkPopupTrigger(l,n,e,r,i,a)})}},{key:"_renderInline",value:function(){(0<arguments.length&&arguments[0]!==undefined?arguments[0]:[]).forEach(function(e){new wi(e,function(){e.renderFinish=!0}).mounted()})}},{key:"_renderCode",value:function(){(0<arguments.length&&arguments[0]!==undefined?arguments[0]:[]).forEach(function(e){new Si(e.type,e.code,function(){e.renderFinish=!0}).mounted()})}},{key:"mounted",value:function(){var e=this.engage,t=e.versions,n=e.currentVersionId,r=e.isVersionEvent,i=(t||[]).find(function(e){return e.versionId===n});if(this.isSendVersionEvent=!r,i){var o=i.terminals,a=i.controlGroup,c=i.versionId,u=Object.assign({},this.engage,{engagerId:this.engage.engageId,exp_id:c});if(a)return this._sendVersionEvent(),di(this.context,u,"view"),hi(n),void this.callback();var s=(o||[])[0],l=s||{},d=l.terminalStatus,f=l.popup,g=l.stickybar,h=l.inline,p=l.code;if(!s&&!window.PT_ENGAGE_IN_DEBUG)return console.log("warning:terminal status is "+d),this.unmounted(),void this.callback();this.currentVersion=i,this.currentTerminal=s,f&&this._renderPopup(f),g&&this._renderStickybar(g),h&&this._renderInline(h),p&&this._renderCode(p),!(h&&0<h.length)||f&&0!==f.length||g&&0!==g.length||(this._sendVersionEvent(),di(this.context,u,"view"),hi(n))}this.callback()}},{key:"unmounted",value:function(){}}]),i}(),Ii="position",xi="pos-center",Oi="ptxEngage",Ai=2147483647,Ci="button-close",Ni="icon-close",Li=or(),Di=1,Ri=function Ri(l,d,f){var g=d.current;ur(l,"click",function(e){for(var n=(e=e||window.event).target||e.srcElement,r=["data-engage-action-click","data-engage-action-close"],t=!1,i="";i=n.getAttribute("data-engage-block"),!(t=function(){for(var e=0,t=r.length;e<t;e++)if(n.getAttribute(r[e]))return!0}())&&(n=n.parentNode),!t&&n!=l;);if(t){e.preventDefault();var o=n.tagName.toUpperCase(),a=n.textContent||o||"unknow target";if(n.parentNode&&"image"==n.parentNode.getAttribute("data-engage-block")){var c=n.querySelector("img");c&&(a=c.getAttribute("alt"))}if(i&&(i==Ni||i==Ci)){Ui(l,"unmounted"),$i().removeChild(l),g.shouldCreateMaskLayer&&li(g.engagerId),di(d,g,"close",a),lr("has close"),f&&"function"==typeof f&&f(g.exp_id,"hasClosed");try{!g.currentTerminal.codeMode&&fi(g.currentTerminal.visualModel.widgetSettings.position)}catch(u){fr("RenderError",u)}return}if(di(d,g,"click",a),n.href&&!/^javascript:(void\(0\))?;?$/.test(n.href))if("_blank"==n.target)try{window.open(n.href,"_blank")}catch(s){lr("not support to use window.open",s),fr("WindowOpenError",s)}else location.href=n.href;f&&"function"==typeof f&&f(g.exp_id)}})},Mi=function Mi(e,t){var n=2<arguments.length&&arguments[2]!==undefined&&arguments[2],r=e.current,i=r.currentTerminal,o=i&&i.visualModel&&i.visualModel.widgetSettings,a=n?i.codeSync:i.visualModel.widgetNodes,c=Bi(Hi(r.engagerId));if(c.innerHTML=Fi(a,r.engagerId),c.style.display="none",$i().appendChild(c),Ui(c,"unmounted"),pi(c),Ui(c,"mounted",function(e){e&&"function"==typeof e&&e(r.engagerId)}),c.style.display="block",c&&"false"!==c.getAttribute("data-show-engage")){i&&(o&&o.position==xi&&(si(r.engagerId),e.current.shouldCreateMaskLayer=!0),gi(c)),Ri(c,e,function(e){return hi(e,1<arguments.length&&arguments[1]!==undefined?arguments[1]:"hasClicked")}),Di=1;var u=c.querySelectorAll("img");Array.prototype.slice.call(u).forEach(function(e){ur(e,"load",function(){e.style.opacity="1",e.style.visibility="visible"})}),t&&"function"==typeof t&&t()}else{var s=mr.get(Ii)||[],l=o&&o.position,d=s.indexOf(l);-1!==d&&(s.splice(d,1),mr.set(Ii,s))}};function Pi(e){if("string"==typeof e||"number"==typeof e){if(-1!=e.indexOf("<")&&/<?\/[a-z]*>/.test(e)){var t=document.createElement("div");return t.innerHTML=e,t}return document.createTextNode(e)}var n,r;1==Di&&"a"==e.tag?(n=document.createElement("div"),(r=e.props).hasOwnProperty("href")&&delete r.href):(n=document.createElement(e.tag),r=e.props),Di++,function o(e,t){for(var n in t)e.setAttribute(n,t[n])}(n,r);var i=e.children;return i&&i.map(Pi).forEach(n.appendChild.bind(n)),n}var Wi=function Wi(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:function(){};e.current;return lr("render control group"),t()};function ji(e){lr("running render dom...");var t=e.context||e;t.current=e.current;var n=t.current,a=function a(r,i){var o=!(2<arguments.length&&arguments[2]!==undefined)||arguments[2];return function(){var e=i.currentVersionId,t=i.exp_id,n=e||t;mr.set(n,n),console.log("onRenderSuccess",window.ptEngage),o&&(di(r,i,"view"),hi(n))}},r=n.currentVersionId,i=n.exp_id;if(!mr.get(r||i)){if(n.controlGroup)return lr("start to render control group version"),void Wi(t,a(t,n));if(lr("start to render normal version"),"3.0"===n.engageVersion)return console.log("current engage is inline"),void new Ti(t,n,Li,a(t,n,!1));var o=n.terminal&&function g(e,t){for(var n=0,r=t.length;n<r;n++)if(t[n].type==e)return t[n];return t[0]}(Li,n.terminal),c=n.defaultOptions||o;if(!o||(n.currentTerminal=o).status||window.PT_ENGAGE_IN_DEBUG)try{var u=n.currentTerminal.visualModel,s=n.currentTerminal.widgets;if(s&&Array.isArray(s)&&0<s.length){var l=Bi(Hi(n.engagerId)),d=$i();new yi(t,n,a(t,n)).mounted(d,l)}else if(u&&u.widgetSettings)if(n.currentTerminal.codeMode){var f=n.currentTerminal.codeSync.html;f&&/data-engage-block/i.test(f)?Mi(t,a(t,n),!0):Vi(t,a(t,n))}else ui(Li,u.widgetSettings.position)&&Mi(t,a(t,n));else n.currentTerminal.codeMode?Vi(t,a(t,n)):ui(Li,c.position||c.commonSync.position)&&function h(e,t){var n=e.current,r=n.currentTerminal.nodes,i=Bi(Hi(n.engagerId)),o=$i(),a=Pi(r);i.appendChild(a),o.appendChild(i);var c=n.currentTerminal;if(c){c.commonSync.position==xi&&(si(n.engagerId),e.current.shouldCreateMaskLayer=!0);var u=i.querySelector(".js-engage-promotion-branding,.engage-promotion__friendLink,.engage-friendLink");if(u)if(c.commonSync.branding){u.style.display="block";var s=(u.href||"").replace(/(utm_source=)Customer-Site/,"$1"+location.hostname);u.setAttribute("href",s)}else u.style.display="none"}Gi(i,e,function(e){return hi(e,1<arguments.length&&arguments[1]!==undefined?arguments[1]:"hasClicked")}),Di=1;var l=i.querySelectorAll("img");Array.prototype.slice.call(l).forEach(function(e){ur(e,"load",function(){e.style.opacity="1",e.style.visibility="visible"})}),t&&"function"==typeof t&&t()}(t,a(t,n))}catch(p){console.log(p),fr("RenderError",p)}else lr("warning:terminal status is "+o.status)}}function Ui(e,t,n){window.ptEngage=window.ptEngage||{};var r=ci(e),i=window.ptEngage[r]||[];0<i.length&&(i.map(function(e){e[t]&&"function"==typeof e[t]&&e[t](),n&&"function"==typeof n&&(e.callback=n),console.log("blockEvent.callback",e.callback)}),r&&"unmounted"===t&&delete window.ptEngage[r])}function Vi(e,t){var n=e.current,r=Bi(Hi(n.engagerId)),i=$i();r.innerHTML=Fi(n.currentTerminal.codeSync,n.engagerId),i.appendChild(r),pi(r);var o=!!r.querySelector("[data-pt-showmask]");if(e.current.shouldCreateMaskLayer=o){si(n.engagerId);var a=r.querySelector(".engage-promo__v-common");if(a)a.style.zIndex=Ai;else{var c=r.querySelector("[data-pt-engage-id]");c&&(c.style.zIndex=Ai)}}Gi(r,e,function(e){return hi(e,1<arguments.length&&arguments[1]!==undefined?arguments[1]:"hasClicked")}),t&&"function"==typeof t&&t()}function Gi(f,g,h){var p=g.current;ur(f,"click",function(e){for(var t,n=(e=e||window.event).target||e.srcElement,r=["js-engage-interaction","js-engage-close","js-engage-promotion-close","js-engage-promotion-button","js-engage-promotion-image","js-engage-promotion-a"],i=!1,o=!1,a="",c=[];t=JSON.parse(n.getAttribute("data-pt-action")||"{}"),o="false"===(n.getAttribute("data-pt-status")||String(t.status)),a=n.getAttribute("data-pt-type")||String(t.type),c=n.className||n.classList.value,!(i=function(){for(var e=0,t=r.length;e<t;e++)if(-1!==c.indexOf(r[e]))return!0}())&&(n=n.parentNode),!i&&n!=f;);if(o)e.preventDefault();else if(i){e.preventDefault();var u=n.tagName.toUpperCase(),s=n.textContent||u||"unknow target";if(n.parentNode&&"image"==n.parentNode.getAttribute("data-engage-block")){var l=n.querySelector("img");l&&(s=l.getAttribute("alt"))}if("3"===a||-1!=c.indexOf("js-engage-close")||-1!=c.indexOf("js-engage-promotion-close"))return $i().removeChild(f),p.shouldCreateMaskLayer&&li(p.engagerId),di(g,p,"close",s),void(h&&"function"==typeof h&&h(p.exp_id,"hasClosed"));if(di(g,p,"click",s),n.href&&!/^javascript:(void\(0\))?;?$/.test(n.href))if("_blank"==n.target)try{window.open(n.href,"_blank")}catch(d){lr("not support to use window.open",d),fr("WindowOpenError",d)}else location.href=n.href;h&&"function"==typeof h&&h(p.exp_id)}})}function Fi(e,t){var n=e||{css:"",html:"",script:""},r=n.css,i=n.html,o=n.script;return vi(r,t),i+o}function $i(){var e=document.getElementById(Oi);return e||((e=document.createElement("div")).setAttribute("id",Oi),document.body.appendChild(e)),e}function Bi(e){var t=document.getElementById(e);return t||(t=document.createElement("div")).setAttribute("id",e),t}function Hi(e){return"engage_"+e}var qi=function(e){!function t(){var e=document.getElementById(Oi);e&&document.body.removeChild(e)}(),e.on("next",function(e,t){lr("call render...",e),function n(e){lr("running render module"),lr(e),lr("render finished,all over"),ji(e)}(e)})},zi="__pt__engager__common__style",Ji=function(e){e.on("next",function(){if(!document.getElementById(zi)){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.id=zi,e.href=("https:"===location.protocol?"https://":"http://")+"pteengagecss.ptengine.jp/styles/engager.css",document.getElementsByTagName("head")[0].appendChild(e)}!function t(){var e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(".engage-promotion-wrap{display:none}")),document.getElementsByTagName("head")[0].appendChild(e)}()})};function Xi(e,t){window.CustomEvent=window.CustomEvent||function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return e.prototype=window.Event.prototype,e}();try{return new window.CustomEvent(e,t)}catch(n){return null}}function Ki(t){return function(){if(0!==arguments.length)switch(arguments[0]){case"showEngagement":var e=arguments[1];!function i(e,t){if(t){var n=e.engager,r=e.setting;Array.isArray(r)||(r=(e.setting||{}).configs||[]),r.filter(function(e){return e.engageId==t}).length<=0?lr("the target engage is not Found"):n.emit("showEngagement.".concat(t))}else lr("the engageId param is required.")}(t,e)}else lr("the api need event arguments")}}var Yi=function(){function t(){cn(this,t);var e="https:"===location.protocol?"https://":"http://";this._callbacks={},this.collectUrl=e+"xcollector.ptengine.jp/webcollect"}return sn(t,[{key:"on",value:function(e,t){return this._callbacks["$"+e]||(this._callbacks["$"+e]=[]),this._callbacks["$"+e].push(t),this}},{key:"off",value:function(e,t){if(0===arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1===arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this}},{key:"once",value:function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this}},{key:"emit",value:function(e){for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n)for(var i=0,o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t);return this}},{key:"hasListeners",value:function(e){return 0<(this._callbacks["$"+e]||[]).length}}]),t}();var Zi=function(){function t(e){cn(this,t),this.timestamp=(new Date).getTime(),this.type=e}return sn(t,[{key:"set",value:function(e,t){if(e&&"string"==typeof e)for(var n=e.split("."),r=this,i=0,o=n.length;i<o;i++){var a=n[i];r[a]||(r[a]={}),i===o-1&&(r[a]=t),r=r[a]}return this}},{key:"setPage",value:function(){var e=0<arguments.length&&arguments[0]!==undefined?arguments[0]:"page",t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:{},n=kr.vn,r=kr.pvn,i=(new Date).getTime()-_r;i<0&&(i=0),this.set("name",e).set("properties",t).set("vn",n).set("pvn",r).set("loadtime",i).set("context",Qi()).set("context.page",this.getDefaultPage())}},{key:"setEvent",value:function(e,t){"track"===this.type&&this.set("context",Qi()).set("context.page",this.getDefaultPage()),this.set("event",e),t&&this.set("properties",t)}},{key:"setUser",value:function(e,t,n){e&&this.set("accountId",e),t&&this.set("properties",t),n&&this.set("source",n)}},{key:"setStatus",value:function(e,t){e&&this.set("accountId",e),t&&this.set("properties",t)}},{key:"setCampaign",value:function(e){this.set("context",Qi()),e&&this.set("context.campaign",e)}},{key:"setEngage",value:function(e){var t=1<arguments.length&&arguments[1]!==undefined?arguments[1]:{};this.set("engage",e),t&&this.set("properties",t)}},{key:"getFields",value:function(){return this.set("packageId",er()),window.PT_ENGAGE_IN_DEBUG&&(this.set("previewMode",!0),this.set("previewId",localStorage.getItem("ptx_previewId"))),Object.assign({},this,kr)}},{key:"getDefaultPage",value:function(){return{hostname:location.hostname,referrer:document.referrer,refType:function t(e){return e?1:0}(document.referrer),title:document.title,url:location.href}}}]),t}();function Qi(){return{timezone:function n(){try{var e=(new Date).getTimezoneOffset();return e||0===e?"GMT"+(e<=0?"+":"")+e/60*-1:""}catch(t){return""}}(),language:navigator.language,screen:{width:function r(){try{var e=window.screen.width;return e?isNaN(parseInt(e,10))?0:parseInt(e,10):0}catch(t){return 0}}(),height:function i(){try{var e=window.screen.height;return e?isNaN(parseInt(e,10))?0:parseInt(e,10):0}catch(t){return 0}}()}}}var eo="pt:on_engage_fired",to="pt:start_engage_render",no=function(e){fn(n,Yi);var t=vn(n);function n(){return cn(this,n),t.apply(this,arguments)}return sn(n,[{key:"page",value:function(e,t,r){var i=this;if(xr()){var n=new Zi("page");n.setPage(e,t);try{var o=JSON.stringify(n.getFields());Qn({url:this.collectUrl,method:"POST",data:o,callback:function(e){try{var t=JSON.parse(e);"success"===t.status&&(i.emit(to,t.content),r&&"function"==typeof r&&r())}catch(n){console.log(n)}}})}catch(a){fr("PageViewModuleError",a)}}}}]),n}(),ro=function(e){fn(n,Yi);var t=vn(n);function n(){return cn(this,n),t.call(this)}return sn(n,[{key:"identify",value:function(e,t,n){var r=this,i=new Zi("identify");xr()&&(i.setUser(e,t,n),Qn({url:this.collectUrl,method:"POST",data:JSON.stringify(i.getFields()),callback:function(e){try{var t=JSON.parse(e);"success"==t.status&&r.emit(to,t.content)}catch(n){console.log(n)}}}))}},{key:"status",value:function(e,t){var r=this,n=new Zi("status");xr()&&(n.setStatus(e,t),Qn({url:this.collectUrl,method:"POST",data:JSON.stringify(n.getFields()),callback:function(e){try{var t=JSON.parse(e);"success"==t.status&&r.emit(to,t.content)}catch(n){console.log(n)}}}))}}]),n}(),io=(new Date).getTime(),oo=0,ao=function(e){fn(n,Yi);var t=vn(n);function n(){var e;return cn(this,n),(e=t.call(this)).vistualEvents=[],e.uncommitedEvents=[],e.isTimeout=!1,e.init(),e}return sn(n,[{key:"init",value:function(){var t=this;function r(){(new Date).getTime()-Er.lastUpdateTime>Er.SILENCEDURATION?(clearInterval(window.ptx_heartbeat_interval),this.isTimeout=!0,console.log("heartbeat timeout")):this.emit("heartbeat")}function l(e,t){for(var n=!1;e==t?n=!0:e=e.parentNode,"body"!==e.nodeName.toLowerCase()&&!n;);return n}(function e(){var s=this;window.addEventListener("click",function(e){var a=(e=e||window.event).target||e.srcElement,t=a.nodeName.toLowerCase(),n=(new Date).getTime();if(n-oo<Er.CLICKINTERVAL&&"a"!==t)return!1;oo=n,Ir("lastUpdateTime",(new Date).getTime());var c=null;if(a&&0<s.vistualEvents.length){var u=function u(e){var r=s.vistualEvents[e];try{var t=document.querySelectorAll(decodeURIComponent(decodeURIComponent(r.csspath)));if(c===t[0])return"continue";for(var n in c=t[0],t){var i=t[n];l(a,i)&&s.addEvent(r.eventName)}s.commit()}catch(o){!function xP(t,n){if(window.jQuery)n();else{var r=!1,i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.src=t,i.appendChild(o),o.onload=o.onreadystatechange=function(){r||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r=!0,n(),o.onload=o.onreadystatechange=null,i&&o.parentNode&&i.removeChild(o))}}}("https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js",function(){var e=window.jQuery(r.csspath);for(var t in e){var n=e[t];l(a,n[0])&&s.addEvent(r.eventName)}})}};for(var r in s.vistualEvents)u(r)}c||(s.emit("click"),c=null)},!0)}).call(this),function i(){var e,n=this;this.on("click",function(){n.isTimeout?(n.isTimeout=!1,n.emit("reactivated"),window.ptx_heartbeat_interval=setInterval(function(){r.call(n)},Er.HEARTBEATINTERVAL)):n.emit("heartbeat")}),this.on("heartbeat",function(){var e=new Zi("heartbeat");if(xr()){var t=(new Date).getTime();return e.set("duration",t-io),kr.profileId?Qn({url:n.collectUrl,method:"POST",data:JSON.stringify(e.getFields())}):void 0}}),window.addEventListener("scroll",function(){e&&clearTimeout(e),e=setTimeout(function(){Ir("lastUpdateTime",(new Date).getTime()),n.emit("heartbeat")},500)}),window.ptx_heartbeat_interval=window.setInterval(function(){r.call(n)},Er.HEARTBEATINTERVAL)}.call(this),this.on("pt:on_vistualevent_fetch_done",function(e){t.vistualEvents=function o(e){var t=[];for(var n in e){var r=e[n],i=r.split(",");new RegExp(i[6].replace(/^\//,"").replace(/\/$/,"")).test(location.href.replace(/\/$/,""))&&i[3]&&i&&"string"==typeof i[7]&&t.push({csspath:decodeURIComponent(i[7]),eventName:i[3]})}return t}(e)})}},{key:"trackEvent",value:function(e,t){if(xr()){var n=new Zi("track");return e&&n.setEvent(e,t),this.dispatch(JSON.stringify(n.getFields()))}}},{key:"commit",value:function(){var e=this.uncommitedEvents.length;if(0<e){var t=new Zi("track");if(!xr())return;1===e?t.setEvent(this.uncommitedEvents[0].name):t.setEvent(this.uncommitedEvents);var n=JSON.stringify(t.getFields());return this.uncommitedEvents=[],this.dispatch(n)}}},{key:"addEvent",value:function(e,t){return this.uncommitedEvents.push({name:e}),this}},{key:"dispatch",value:function(e){var r=this;return Qn({url:this.collectUrl,method:"POST",data:e,callback:function(e){try{var t=JSON.parse(e);"success"===t.status&&r.emit(to,t.content)}catch(n){console.log(n)}}})}}]),n}(),co=function(e){fn(n,Yi);var t=vn(n);function n(){return cn(this,n),t.apply(this,arguments)}return sn(n,[{key:"engage",value:function(e,t){var r=this,n=new Zi("engage");xr()&&(n.setEngage(e,t),Qn({url:this.collectUrl,method:"POST",data:JSON.stringify(n.getFields()),callback:function(e){try{var t=JSON.parse(e);"success"===t.status&&r.emit(to,t.content)}catch(n){console.log(n)}}}))}}]),n}(),uo=function(e){fn(n,Yi);var t=vn(n);function n(){var e;return cn(this,n),(e=t.call(this))._page=new no,e._user=new ro,e._event=new ao,e._engage=new co,e.init(),e}return sn(n,[{key:"init",value:function(){var t=this;this._event.on(to,function(e){t.emit(eo,e)}),this._page.on(to,function(e){console.log("pt:on_pageview_response","fired"),t.emit(eo,e)}),this._user.on(to,function(e){t.emit(eo,e)}),this._engage.on(to,function(e){t.emit(eo,e)}),this._event.on("reactivated",function(e){Tr("reactivated"),t.page()})}},{key:"track",value:function(e,t){var n=2<arguments.length&&arguments[2]!==undefined&&arguments[2];this._event.trackEvent(e,t,n)}},{key:"page",value:function(e,t,n){this._page.page(e,t,n)}},{key:"identify",value:function(e,t,n){this._user.identify(e,t,n)}},{key:"status",value:function(e,t){this._user.status(e,t)}},{key:"engage",value:function(e,t){this._engage.engage(e,t)}}]),n}();var so=function(t){var a=new uo,n=window[[qn.dataLayer]]||[],c=function c(e){try{var t=e||{},n=t.event,r=t.name,i=t.property;n&&a[n]&&"function"==typeof a[n]&&a[n](r,i)}catch(o){}},r=function r(){a.page("","",function(){var t=(n||{}).hide;t&&t.end&&setTimeout(function(){try{t.end()}catch(e){}})}),n.forEach(function(e){c(e)})},i=!1;(window[qn.funName]||[]).forEach(function(e){var t=e||[];switch(t[0]){case"page":a.page(t[1],t[2]),i=!0;break;case"track":n.push({event:"track",name:t[1],property:t[2]});break;case"identify":n.push({event:"identify",name:t[1],property:t[2]});break;default:console.log("no public method invoked")}}),i&&fr("ExecuteException","page view init exception"),n.push=function(e){c(e)},-1!==navigator.userAgent.indexOf("Safari")&&-1!==navigator.userAgent.indexOf("Version")?t.on("send.pageview",function(e){r()}):r();var e=(window[qn.funName]||{}).__ver;window[qn.funName]=a,e&&(window[qn.funName].__ver=e),function o(){try{var e=new Xi("ptEventReady",{bubbles:!1,cancelable:!1,detail:{}});e&&(window.dispatchEvent&&"function"==typeof window.dispatchEvent?window.dispatchEvent(e):window.fireEvent&&"function"==typeof window.fireEvent&&window.fireEvent(e))}catch(t){console.log("catch phase invoke !")}}(),t.on("send.engage",function(e){a.engage(e)}),a.on(eo,function(e){console.log("run setting"),t.emit("run.setting",e)})},lo=new e;Sr(),localStorage.removeItem("ptx_engager_debug"),lo.use(function ho(d,e){lr("running sender module"),lr("mounted the send to context，send to collect package"),d.send=function(e,t){var n=t.engagerId,r=t.engagerVerId,i=t.variant||{},o=t.triggerCondition;if("click"===e&&(o="click"),xr()){var a=kr.pageId,c=kr.pageviewId,u={sid:c,uid:kr.deviceId,vid:kr.sessionId,pid:a,peid:c,ts:(new Date).getTime(),engagerId:n,engagerVerId:r,triggerCondition:o,engagerType:e,variant:i};window.PT_ENGAGE_IN_DEBUG&&(u.previewMode=!0,u.previewId=localStorage.getItem("ptx_previewId")||"");var s=d.engager||window.$$__ptx_engage_$;try{s.emit("send.engage",{name:"",id:n,versionId:r,action:e,properties:i})}catch(l){fr("NullException",l)}}},lr("init sender finished,ready to enter trigger staged..."),e()}).use(function po(e,t){if(window.localStorage){lr("ready to enter triger staged",e);var n=e.setting||[];oi(e,n),t()}else lr("not support to use localstorage")}).use(function vo(e,t){try{var n=new Xi("ptEventReady",{bubbles:!1,cancelable:!1,detail:{}});n&&(window.Ptengine=Ki(e),document.dispatchEvent&&"function"==typeof document.dispatchEvent?document.dispatchEvent(n):document.fireEvent&&"function"==typeof document.fireEvent&&document.fireEvent(n))}catch(r){console.log("catch phase invoke !")}t()}),-1===location.href.indexOf("preview_token=")&&so(lo),Ji(lo),qi(lo),lo.init()}();
//# sourceMappingURL=http://localhost:8080/dest/bundle.js.map