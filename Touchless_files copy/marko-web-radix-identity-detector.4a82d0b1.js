(window.webpackJsonpCMSBrowserComponents=window.webpackJsonpCMSBrowserComponents||[]).push([[13],{257:function(t,e,n){"use strict";n.r(e);var r,i=n(90),o=n.n(i),c=n(4),a=n.n(c),s=n(5),u=n.n(s),p=n(95),d={inject:["EventBus"],props:{appId:{type:String,required:!0},url:{type:String,default:"https://radix.as3.io"}},data:function(){return{identityKey:"ident[pull]"}},created:function(){this.track()},methods:{track:(r=u()(a.a.mark((function t(){var e,n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this.parseIdentityValue())){t.next=11;break}return t.next=4,Object(p.a)({url:this.url,appId:this.appId,method:"GET",endpoint:"/app/auth?".concat(this.encode(this.identityKey),"=").concat(this.encode(e))});case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,i=(r||{}).identity,this.EventBus.$emit("radix-identity-detected",i),window.Sapience&&i&&window.Sapience.Tracker.setIdentity(i);case 11:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)}),parseIdentityValue:function(){for(var t,e=this,n=window.location.search.replace(/(^\?)/,"").split("&"),r=0;r<n.length;r+=1){var i=n[r].split("=").map((function(t){return e.decode(t)})),c=o()(i,2),a=c[0],s=c[1];a==="rdx.".concat(this.identityKey)&&s&&(t=s)}return t},decode:function(t){return decodeURIComponent(t)},encode:function(t){return encodeURIComponent(t)}}},l=n(1),f=Object(l.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"radix-identity-detector",attrs:{"data-app-id":this.appId}})}),[],!1,null,null,null);e.default=f.exports},90:function(t,e,n){var r=n(91),i=n(92),o=n(93);t.exports=function(t,e){return r(t)||i(t,e)||o()}},91:function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},92:function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}},93:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},95:function(t,e,n){"use strict";var r=n(2),i=n.n(r);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(n,!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e.a=function(t){var e=t.url,n=t.appId,r=t.method,i=t.endpoint,o=t.body;return fetch("".concat(e).concat(i),c({method:r,headers:c({"x-radix-appid":n,"x-requested-with":"XMLHttpRequest"},o&&{"content-type":"application/json"}),cache:"no-cache",credentials:"same-origin"},o&&{body:JSON.stringify(o)}))}}}]);
//# sourceMappingURL=marko-web-radix-identity-detector.4a82d0b1.js.map